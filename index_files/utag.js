//tealium universal tag - utag.loader ut4.0.201508270937, Copyright 2015 Tealium.com Inc. All Rights Reserved.
var cxDataLayer=cxDataLayer||{};cxDataLayer.config=cxDataLayer.config||{coremetrics:{},optimizely:{},tealium:{}};cxDataLayer.config.tealium={version:"201508270937"}
if(typeof utag_err=='undefined')var utag_err=[];window._tealium_old_error=window._tealium_old_error||window.onerror||function(){};window.onerror=function(m,u,l){if(typeof u!=='undefined'&&u.indexOf('/utag.')>0&&utag_err.length<5)utag_err.push({e:m,s:u,l:l,t:'js'});window._tealium_old_error(m,u,l)};var utag_condload=false;try{(function(){function ul(src,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;a.getElementsByTagName('head')[0].appendChild(b)};if((""+document.cookie).match("utag_env_cathaypacific_main=([^\S;]*)")){if(RegExp.$1.indexOf("/prod/")===-1){ul(RegExp.$1);utag_condload=true;__tealium_default_path='//tags.tiqcdn.com/utag/cathaypacific/main/prod/';}}})();}catch(e){};try{(function(e){"use strict";var b=function(a,d,c){return 1===arguments.length?b.get(a):b.set(a,d,c)};b._document=document;b._navigator=navigator;b.defaults={path:"/"};b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();return b._cache[a]};b.set=function(a,d,c){c=b._getExtendedOptions(c);c.expires=b._getExpiresDate(d===e?-1:c.expires);b._document.cookie=b._generateCookieString(a,d,c);return b};b.expire=function(a,d){return b.set(a,e,d)};b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==e?a.secure:b.defaults.secure}};b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())};b._getExpiresDate=function(a,d){d=d||new Date;switch(typeof a){case"number":a=new Date(d.getTime()+1E3*a);break;case"string":a=new Date(a)}if(a&&!b._isValidDate(a))throw Error("`expires` parameter cannot be converted to a valid Date instance");return a};b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent);a=a.replace(/\(/g,"%28").replace(/\)/g,"%29");b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);c=c||{};a=a+"="+b+(c.path?";path="+c.path:"");a+=c.domain?";domain="+c.domain:"";a+=c.expires?";expires="+c.expires.toUTCString():"";return a+=c.secure?";secure":""};b._getCookieObjectFromString=function(a){var d={};a=a?a.split("; "):[];for(var c=0;c<a.length;c++){var f=b._getKeyValuePairFromCookieString(a[c]);d[f.key]===e&&(d[f.key]=f.value)}return d};b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("="),b=0>b?a.length:b;return{key:decodeURIComponent(a.substr(0,b)),value:decodeURIComponent(a.substr(b+1))}};b._renewCache=function(){b._cache=b._getCookieObjectFromString(b._document.cookie);b._cachedDocumentCookie=b._document.cookie};b._areEnabled=function(){var a="1"===b.set("cookies.js",1).get("cookies.js");b.expire("cookies.js");return a};b.enabled=b._areEnabled();"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.Cookies=b):window.Cookies=b})();if(document.domain.indexOf('cathaypacific.com')!==-1){var domain='cathaypacific.com'}else{var domain='dragonair.com'};Cookies.defaults={path:'/',domain:domain};}catch(e){};if(!utag_condload){try{eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(7(j){j.12=7(){4 i=7(){5 i.17.19(j,8)};i.1k="1.1.0";i.x=7(s){6(!s)5{};6(s.9("=")===-1&&s.9("&")===-1)5{};s=i.A(s);4 a={};4 b=s.B("&");C(4 c y b){6(b.z(c)){4 d=b[c].B("=");4 e=M(d[0]),18=M(d[1]);i.w(a,e,18)}}5 a};i.11=7(s){s=M(s);Y(s.9("+")>-1){s=s.V("+"," ")};5 s};i.w=7(a,b,c){4 d=l c!=="o";4 e=-1;4 f={\'F\':F,\'K\':K,\'16\':16};6(l b==\'T\'||1e.1j(b)==\'[D 1m]\'){e=b.I(/[\\.\\[]/)}6(e===-1){6(i.S){c=c&&!1h(c)?+c:c===\'o\'?o:f[c]!==o?f[c]:i.11(c)}5 d?(a[b]=c):a[b]}4 g=b.v(0,e);4 h=b.v(e+1);E(b.1c(e)){u\'[\':a[g]=a[g]||[];h=h.V(\']\',\'\');6(h.I(/[\\.\\[]/)===-1){h=1f(h,10)}5 i.w(a[g],h,c);u\'.\':a[g]=a[g]||{};5 i.w(a[g],h,c)}5 a};i.t=7(a,b){E(l(a)){u"D":4 c=[];4 d;C(4 e y a){6(!a.z(e))W;4 f=a[e];6(l(e)==="o"||e.r===0||l(f)==="o")W;d=b?b+"."+e:e;6(l a.r!=="o"){d=b?b+"["+e+"]":e}6(l f==="D"){c.n(i.t(f,d))}1a{c.n(G(d)+"="+G(f))}}5 c.13("&")}5 G(a)};i.1d=7(){4 a=(i.14?i.H:i.m);4 b=[J.1i,a];4 c={};E(8.r){u 1:b.n(i.t(8[0]));U;u 2:b[0]=i.L(8[0]);c=i.x(8[0]);c=i.X(c,8[1]);b.n(i.t(c));U;u 3:b[0]=i.L(8[0]);b[1]=i.m;b.n(i.t(8[1]));(l(8[2])==="T")?b.n(i.q):b.n(i.H);b.n(i.t(8[2]))}4 s=b.13("");6(s.9(a)==s.r-a.r){s=s.v(0,s.r-a.r)}5 s};i.14=K;i.m="?";i.q="#";i.H="#?";i.S=F;i.Z=7(){4 a=i.x(i.N()+"&"+i.O());5 i.P?i.P:i.P=a};i.17=7(a,b){4 c=i.w(i.Z(),a);5 l(c)==="o"?b:c};i.1g=7(){5 i.Q?i.Q:i.Q=i.x(i.N())};i.15=7(){5 i.R?i.R:i.R=i.x(i.O())};i.N=7(){5 i.A(J.I)};i.O=7(){5 i.A(J.15)};i.A=7(s){6(s.9(i.m)>-1)s=s.B(i.m)[1];6(s.9(i.q)>-1)s=s.B(i.q)[1];6(s.9("=")===-1&&s.9("&")===-1)5"";Y(s.9(i.q)==0||s.9(i.m)==0)s=s.v(1);5 s};i.L=7(p){6(p.9(i.m)>-1)p=p.v(0,p.9(i.m));6(p.9(i.q)>-1)p=p.v(0,p.9(i.q));5 p};i.X=7(){4 a={};C(4 b y 8){6(8.z(b)){C(4 k y 8[b]){6(8[b].z(k)){a[k]=8[b][k]}}}}5 a};5 i};j.1l=12()})(1b);',62,85,'||||var|return|if|function|arguments|indexOf||||||||||||typeof|querySeperator|push|undefined||hashSeperator|length||stringify|case|substr|_access|parse|in|hasOwnProperty|_cleanParamStr|split|for|object|switch|true|encodeURIComponent|hashQuerySeperator|search|location|false|_cleanPath|decodeURIComponent|querystring|hashstring|_all|_query|_hash|coerceMode|string|break|replace|continue|merge|while|all||__decode|MakeArg|join|urlUseHash|hash|null|get|val|apply|else|window|charAt|url|toString|parseInt|query|isNaN|pathname|call|version|Arg|String'.split('|'),0,{}));}catch(e){}};if(!utag_condload){try{(function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&db.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Tb[a]||Ub[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}db[b]=function(e,f){var g,h,i=db.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=db().utc().set(d,a);return i.call(db.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[jb]<0||a._a[jb]>11?jb:a._a[kb]<1||a._a[kb]>t(a._a[ib],a._a[jb])?kb:a._a[lb]<0||a._a[lb]>23?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>59?nb:a._a[ob]<0||a._a[ob]>999?ob:-1,a._pf._overflowDayOfYear&&(ib>b||b>kb)&&(b=kb),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?db(a).zone(b._offset||0):db(a).local()}function A(a,b){return b.abbr=a,pb[a]||(pb[a]=new e),pb[a].set(b),pb[a]}function B(a){delete pb[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pb[a]&&rb)try{require("./lang/"+a)}catch(b){}return pb[a]};if(!a)return db.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return db.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(vb);for(b=0,c=d.length;c>b;b++)d[b]=Yb[d[b]]?Yb[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Vb[b]||(Vb[b]=E(b)),Vb[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wb.lastIndex=0;d>=0&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ib;case"YYYY":case"GGGG":case"gggg":return d?Jb:zb;case"Y":case"G":case"g":return Lb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Kb:Ab;case"S":if(d)return Gb;case"SS":if(d)return Hb;case"SSS":if(d)return Ib;case"DDD":return yb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Cb;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fb;case"Z":case"ZZ":return Db;case"T":return Eb;case"SSSS":return Bb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Hb:xb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xb;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Db)||[],c=b[b.length-1]||[],d=(c+"").match(Qb)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[jb]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[jb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[kb]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ib]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ib]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[lb]=s(b);break;case"m":case"mm":e[mb]=s(b);break;case"s":case"ss":e[nb]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ob]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[kb]&&null==a._a[jb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ib]?db().weekYear():a._a[ib]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ib]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ib]?d[ib]:a._a[ib],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[jb]=c.getUTCMonth(),a._a[kb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[lb]+=s((a._tzm||0)/60),l[mb]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(vb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Yb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[lb]<12&&(a._a[lb]+=12),a._isPm===!1&&12===a._a[lb]&&(a._a[lb]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Mb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Ob.length;c>b;b++)if(Ob[b][1].exec(d)){a._f=Ob[b][0]+(e[6]||" ");break}for(b=0,c=Pb.length;c>b;b++)if(Pb[b][1].exec(d)){a._f+=Pb[b][0];break}d.match(Db)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=hb(Math.abs(a)/1e3),e=hb(d/60),f=hb(e/60),g=hb(f/24),h=hb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",hb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=db(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?db.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),db.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){db.fn[a]=db.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),db.updateOffset(this),this):this._d["get"+c+b]()}}function ab(a){db.duration.fn[a]=function(){return this._data[a]}}function bb(a,b){db.duration.fn["as"+a]=function(){return+this/b}}function cb(a){var b=!1,c=db;"undefined"==typeof ender&&(a?(gb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(gb.moment,c)):gb.moment=db)}for(var db,eb,fb="2.5.1",gb=this,hb=Math.round,ib=0,jb=1,kb=2,lb=3,mb=4,nb=5,ob=6,pb={},qb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},rb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sb=/^\/?Date\((\-?\d+)/i,tb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ub=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xb=/\d\d?/,yb=/\d{1,3}/,zb=/\d{1,4}/,Ab=/[+\-]?\d{1,6}/,Bb=/\d+/,Cb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Db=/Z|[\+\-]\d\d:?\d\d/gi,Eb=/T/i,Fb=/[\+\-]?\d+(\.\d{1,3})?/,Gb=/\d/,Hb=/\d\d/,Ib=/\d{3}/,Jb=/\d{4}/,Kb=/[+-]?\d{6}/,Lb=/[+-]?\d+/,Mb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nb="YYYY-MM-DDTHH:mm:ssZ",Ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qb=/([\+\-]|\d\d)/gi,Rb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Tb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ub={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Vb={},Wb="DDD w W M D d".split(" "),Xb="M D H h m s w W".split(" "),Yb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wb.length;)eb=Wb.pop(),Yb[eb+"o"]=d(Yb[eb],eb);for(;Xb.length;)eb=Xb.pop(),Yb[eb+eb]=c(Yb[eb],2);for(Yb.DDDD=c(Yb.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=db.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=db([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),db=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},db.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},db.unix=function(a){return db(1e3*a)},db.duration=function(a,b){var c,d,e,f=a,h=null;return db.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=tb.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[kb])*c,h:s(h[lb])*c,m:s(h[mb])*c,s:s(h[nb])*c,ms:s(h[ob])*c}):(h=ub.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),db.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},db.version=fb,db.defaultFormat=Nb,db.updateOffset=function(){},db.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pb[a]||C(a),c=db.duration.fn._lang=db.fn._lang=C(a),c._abbr):db.fn._lang._abbr},db.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},db.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},db.isDuration=function(a){return a instanceof g},eb=Zb.length-1;eb>=0;--eb)r(Zb[eb]);for(db.normalizeUnits=function(a){return p(a)},db.invalid=function(a){var b=db.utc(0/0);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},db.parseZone=function(a){return db(a).parseZone()},h(db.fn=f.prototype,{clone:function(){return db(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=db(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?db.utc(this._a):db(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||db.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-db(this).startOf("month")-(f-db(f).startOf("month")))/d,e-=6e4*(this.zone()-db(this).startOf("month").zone()-(f.zone()-db(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return db.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(db(),a)},calendar:function(){var a=z(db(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),db.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+db(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+db(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=db.apply(null,arguments),this>a?this:a},max:function(a){return a=db.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,db.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?db(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=hb((db(this).startOf("day")-db(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),eb=0;eb<Rb.length;eb++)_(Rb[eb].toLowerCase().replace(/s$/,""),Rb[eb]);_("year","FullYear"),db.fn.days=db.fn.day,db.fn.months=db.fn.month,db.fn.weeks=db.fn.week,db.fn.isoWeeks=db.fn.isoWeek,db.fn.toJSON=db.fn.toISOString,h(db.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=db.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=db.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:db.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(eb in Sb)Sb.hasOwnProperty(eb)&&(bb(eb,Sb[eb]),ab(eb.toLowerCase()));bb("Weeks",6048e5),db.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},db.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),rb?(module.exports=db,cb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&cb(d.config().noGlobal===a),db}):cb()}).call(this);}catch(e){}};if(!utag_condload){try{window.tmsCoremetricsEventTag=function(event_id,action_type,event_category,points,attr){try{if(event_id.indexOf('Flight Msg - New Request')!=-1){attr=points
points=0};setTimeout(cmCreateConversionEventTag,1000,event_id,action_type,event_category,points,attr);cxTagLogger(event_id);}catch(e){console.log(e.msg)}};window.tmsCoremetricsRegistrationTag=function(userProfile){};window.tmsCoremetricsElementTag=function(element_id,element_category,attr){$(document).ready(function(){cmCreateElementTag(element_id,element_category,attr);});};window.tmsCoremetricsPageViewTag=function(page_id,category_id,search_term,search_results,attr){$(document).ready(function(){datalayer.page.search_keyword=search_term;if(document.URL.indexOf('investor-relations/announcements.html')!=-1){search_term="IR::"+search_term};datalayer.page.search_results=search_results;utag.view({force_load:true,'page.search_keyword':search_term,'page.search_results':search_results});});};window.tmsCoremetricsLinkClickTag=function(href,link_name,page_id){cmCreateManualLinkClickTag(href,link_name,page_id);};}catch(e){}};if(!utag_condload){try{window.log=function f(){log.history=log.history||[];log.history.push(arguments);if(this.console){var args=arguments,newarr;args.callee=args.callee.caller;newarr=[].slice.call(args);if(typeof console.log==='object')log.apply.call(console.log,console,newarr);else console.log.apply(console,newarr);}};(function(a){function b(){}
for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})(function(){try{console.log();return window.console;}catch(a){return(window.console={});}}());window.cxTagLogger=function(m){console.log("[Tealium] "+m);};}catch(e){}};if(!utag_condload){try{window.cxDataLayer.patch=function(){if(this.patched!=true){if(typeof this.indicator=='undefined'){this.indicator={}};if(typeof this.member=='undefined'){this.member={}};if(typeof this.page.search=='undefined'){this.page.search={}};if(typeof this.page.system=='undefined'){this.page.system={}};if(document.domain.indexOf('cathaypacific.com')!==-1){this.page.brand='CX'}else{this.page.brand='KA'};if(this.page.system.name=='CQ5'){if(typeof core_pageID=='undefined'){var core_pageID};if(typeof core_categoryID=='undefined'){var core_categoryID};this.page.page_id=core_pageID||this.page.page_id.replace('.html','');this.page.page_category=core_categoryID||this.page.page_category.replace('.html','');if(this.page.page_id=='/cx'||this.page.page_id=='/ka'){this.page.page_id=this.page.brand+'-SPLASH'
this.page.page_category='en_INTL'};if(this.page.page_id.split("/")[3]=="flightoffer"){var path=document.URL.split('/')
this.page.page_id="/"+[path[3],path[4],path[5].replace(".html","")].join("/")};if(this.page.page_category=='/cx'||this.page.page_category=='/ka'){this.page.page_category=this.page.page_id};};if(this.page.system.name=="IBE"){if(typeof document.getElementsByName('ENTRYCOUNTRY')[0]!=='undefined'){var country=document.getElementsByName('ENTRYCOUNTRY')[0].value
var language=document.getElementsByName('ENTRYLANGUAGE')[0].value
var locale=[language,country].join('_')
Cookies.set('locale',locale)
this.page.country=country
this.page.language=language.replace("zh_CN","sc").replace("zh_TW","zh")
this.page.locale=locale
cxTagLogger('Save Locale in IBE')};this.page.timestamp=this.page.timestamp+'+00:00'
var c=this.page.page_code;if(typeof this.page.system.promotion!=='undefined'){var promo=this.page.system.promotion
this.page.system.params.promotion={promo_code:promo.code,fare_id:promo.fare_id};}else{this.page.system.params.promotion={}};if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AWCR'||c=='AWCL'||c=='AVAI'){this.page.system.params.route=this.itinerary.route;this.page.system.params.trip_type=this.itinerary.trip_type;this.page.system.params.cabin=this.itinerary.cabin;this.itinerary.segments=[];};if(this.page.page_name.indexOf('Select_Flights')!=-1||c=="FFPR"||c=='FFPC'||c=='AVAI'){delete(this.products);};if(this.page.page_id.indexOf('::BOH::')!=-1){var stream=this.page.system.params.flow.split('_')[0];if(stream=='Promotion'){stream='REVENUE'};this.page.page_id=this.page.page_id.replace("::BOH::","::"+stream+"::")+"-BOH"};if(typeof this.itinerary!=='undefined'){if(this.itinerary.datetime_arrival!==''){this.itinerary.outbound={datetime:this.itinerary.datetime_depart,date:moment(this.itinerary.datetime_depart).format('YYYY-MM-DD'),date_L:moment(this.itinerary.datetime_depart).format('L'),month:moment(this.itinerary.datetime_depart).format('YYYY-MM'),year:moment(this.itinerary.datetime_depart).format('YYYY')}
this.itinerary.inbound={datetime:this.itinerary.datetime_arrival,date:moment(this.itinerary.datetime_arrival).format('YYYY-MM-DD'),date_L:moment(this.itinerary.datetime_arrival).format('L'),month:moment(this.itinerary.datetime_arrival).format('YYYY-MM'),year:moment(this.itinerary.datetime_arrival).format('YYYY')}};try{this.itinerary.destination={};this.itinerary.destination.city_name=window.sessionStorage.getItem("itinerary.destination.city_name");}catch(e){console.log(e.message);}};};};this.patched=true;cxTagLogger('cxDataLayer patched.');return this;};try{window.cxDataLayer.patch();}catch(e){cxTagLogger(e);};}catch(e){}};if(!utag_condload){try{var cxDataLayer=(function(){d=cxDataLayer||{};h=document.domain;e=(h=='www.cathaypacific.com'||h=='book.cathaypacific.com'||h=='cdn.cathaypacific.com'||h=='www.dragonair.com'||h=='book.dragonair.com'||h=='cdn.dragonair.com'||h=='holidays.cathaypacific.com')?('prod'):('qa')
b=(h.indexOf('cathaypacific.com')!==-1)?('cx'):('ka')
c=cxDataLayer.page.country
var multisite;d.config={env:e,random_id:(Math.floor(Math.random()*90000)+100000),tealium:{version:d.config.tealium.version||"##UTVERSION##"},optimizely:{project_id:(e=='prod')?('1370244502'):('1633341726')},coremetrics:{client_id:(function(){client_ids={cx:{AU:'90293196',BH:'90293333',CA:'90293470',CH:'90296434',CN:'90293607',GZ:'90291004',DK:'90298228',FR:'90293744',DE:'90293881',HK:'90293059',IN:'90294018',ID:'90294155',IE:'90326009',IT:'90294292',JP:'90294429',KR:'90294566',MY:'90294703',MV:'90296408',NL:'90294840',NZ:'90294977',PK:'90295114',PH:'90295251',QA:'90383589',RU:'90325872',SA:'90295388',SG:'90295525',ZA:'90295662',LK:'90295799',TW:'90295936',TH:'90296073',AE:'90296210',GB:'90296347',US:'90296369',VN:'90296382',INTL:'90298215'},ka:{BD:'90291415',KH:'90363958',CN:'90291552',GZ:'90291141',HK:'90291689',IN:'90291826',JP:'90291963',MM:'90296395',MY:'90292100',NP:'90292648',PH:'90292785',TW:'90292237',TH:'90292374',VN:'90292511',INTL:'90292922'}};client_id_local=client_ids[b][c]||client_ids[b]['INTL'];client_id_master=(b=='cx')?('90291278'):('90290867')
if(cxDataLayer.page.country=='ES'){client_id_master=client_id_master.replace('90291278','51500000');client_id_local=b.toUpperCase()+c.toUpperCase();multisite=true;}
if(e!=='prod'){if(multisite){client_id_master=client_id_master.replace('5','8');}else{client_id_master=client_id_master.replace('9','6');client_id_local=client_id_local.replace('9','6');}};if(multisite){return(d.config.coremetrics.client_id||[client_id_master,client_id_local].join('|'));}else{return(d.config.coremetrics.client_id||[client_id_master,client_id_local].join(';'));}})(),cookie_domain:(b=='cx')?('cathaypacific.com'):('dragonair.com'),datacollection_domain:(e=='prod')?('data.coremetrics.com'):('testdata.coremetrics.com')},ga:{tracker_id:(function(){switch(e){case'dev':tid='UA-54513972-1'
break;case'qa':tid='UA-54513972-1'
break;case'prod':tid='UA-54513972-3'
break;}
return tid})()}};return d})();}catch(e){}};if(!utag_condload){try{cxTagLogger("==================================================")
cxTagLogger("Tealium Version - "+cxDataLayer.config.tealium.version);}catch(e){}};if(!utag_condload){try{window.cxTagTracker=function(e,prefix){try{cxTagLogger([prefix,'ERROR',e.name,e.message].join('::'));}catch(e){cxTagLogger('[cxTagTracker] Error.')
}};}catch(e){}};if(!utag_condload){try{cxDataLayer.channel_map={"asiamiles.com":"asiamiles.com","facebook.com":"Facebook","fourqusare.com":"Foursquare","instagram.com":"instagram","linkedin.com":"LinkedIn","pinterest.com":"Pinterest","renren.com":"RenRen","weibo.cn":"Weibo","weibo.com":"Weibo","youtube.com":"YouTube","twitter.com":"Twitter","aviationtraining.cathaypacific.com":"CX Mini Sites","www.cathayholidays.co.jp":"cathayholidays.co.jp","cathaypacific-campaign.com":"cathaypacific-campaign.com","cathaypacificcargo.com":"cathaypacificcargo.com","cathaypacificinsights.com":"cathaypacificinsights.com","www.cxagents.com":"CX Agents","www.cxholidays.com":"CX Holidays","cxleverage.com":"cxleverage.com","discovery.cathaypacific.com":"discovery.cathaypacific.com","downloads.cathaypacific.com":"downloads.cathaypacific.com","www.dragonaircargo.com":"dragonaircargo.com","dragonairhost.com":"CX Mini Sites","events.cathaypacific.com":"events.cathaypacific.com","iconnect.cathaypacific.com":"iconnect.cathaypacific.com","intracx.cathaypacific.com":"IntraCX","japanunlimited.cathaypacific.com":"CX Mini Sites","jobsatcathaypacific.com":"jobsatcathaypacific.com","www.kaagents.com":"KA Agents","www.cxholidays.com":"www.cxholidays.com","kayouthaviationacademy.com":"CX Mini Sites","learning.cathaypacific.com":"learning.cathaypacific.com","neweconomyclass.cathaypacific.com":"neweconomyclass.cathaypacific.com","oneworld.com":"oneworld.com","people.cathaypacific.com":"CX Mini Sites","premiumeconomyclass.cathaypacific.com":"CX Mini Sites","training.cathaypacific.com":"training.cathaypacific.com"};if(document.domain=='www.cathaypacific.com'){cxDataLayer.channel_map['www.dragonair.com']='dragonair.com'};if(document.domain=='www.dragonair.com'){cxDataLayer.channel_map['www.cathaypacific.com']='cathaypacific.com'};domain_filter=function(domain){for(d in cxDataLayer.channel_map){if(domain.indexOf(d)!=-1){var referral_domain=d
break;};};return referral_domain};if(document.referrer&&document.referrer!==""&&document.URL.indexOf("cm_mmc=")==-1){var referral_domain=document.referrer.split('/')[2];if(referral_domain!=document.domain){var channel=cxDataLayer.channel_map[domain_filter(referral_domain)]
if(referral_domain=='t.co'){channel='Twitter'};if(channel!=undefined){window.manual_cm_mmc=[channel,referral_domain,'NA','NA'].join("-_-")};};};}catch(e){}};if(!utag_condload){try{DataLayer=function(d){this.config=d.config;this.page=new DataLayer.Page(d);if(d.member){this.member=new DataLayer.Member(d)};if(d.itinerary){this.itinerary=new DataLayer.Itinerary(d)};if(d.products){this.products=new DataLayer.Products(d)};if(d.transaction){this.transaction=new DataLayer.Transaction(d)}
if(d.indicator){this.indicator=new DataLayer.Indicator(d)};this.collection=new DataLayer.Collection(this);this.event=new DataLayer.Event(this);this.campaign={};if(document.domain=="book.cathaypacific.com"&&document.referrer.indexOf("utm_medium")!=-1){args=Arg.parse(document.referrer)
this.utm={medium:args["utm_medium"],source:args["utm_source"],term:args["utm_term"],content:args["utm_content"],campaign:args["utm_campaign"]}};};DataLayer.Page=function(d){try{var p=d.page;p.search=p.search||{};p.meta=p.meta||{};return{env:p.env,timestamp:p.timestamp,timestamp_local:moment().format(),brand:p.brand||((document.domain.indexOf('cathaypacific.com')!=-1)?"CX":"KA"),page_id:p.page_id,page_id_slashified:p.page_id.replace(/::/gi,"/"),page_name:p.page_name,page_code:p.page_code,page_category:this.page_category(d),page_category_slashified:this.page_category(d).replace(/::/gi,"/"),page_type:this.page_type(p),page_event:this.page_event(d),error_code:p.error_code,error_page_id:this.error_page_id(d),country:this.country(d),language:this.language(d).replace("zh_CN","sc").replace("zh_TW","zh").replace("tc","zh"),locale:this.locale(d),currency:p.currency,cm_mmc:this.cm_mmc(),cm_re:d.page.cm_re,search_keyword:this.search_keyword(p),search_results:p.search.results,meta:{city:p.meta.city},system:{name:p.system.name,params:this.params(d)}}}catch(e){cxTagTracker(e,'Page')};};DataLayer.Page.prototype.cm_mmc=function(){if(document.referrer.indexOf('cm_mmc=')!=-1){var cm_mmc=Arg.parse(document.referrer).cm_mmc.replace(/-_-/g,"::");}else if(document.URL.indexOf('cm_mmc=')!=-1){var cm_mmc=Arg.parse(document.URL).cm_mmc.replace(/-_-/g,"::");}else{var cm_mmc='Direct Load'}
if(typeof Cookies.get('cm_mmc')=='undefined'){Cookies.set('cm_mmc',cm_mmc,{expires:2592000})}
return cm_mmc};DataLayer.Page.prototype.country=function(d){var country;if(d.page.page_category!=='en_INTL'){country=d.page.country||Cookies.get('country')
Cookies.set('country',d.page.country)}else{if(document.referrer.indexOf('www.cathaypacific.com/cx/')!==-1||document.referrer.indexOf('www.dragonair.com/ka/')!==-1){country=Cookies.get('country');}else{country='INTL'}}
return country;};DataLayer.Page.prototype.error_page_id=function(d){var error_page_id;var p=d.page
var system=p.system.name;switch(system){case('IBE'):if(p.page_code!=='GERR'){error_page_id=p.page_id
Cookies.set('page_id',p.page_id)}else{error_page_id=Cookies.get('page_id')};break;};return(error_page_id);};DataLayer.Page.prototype.page_event=function(d){var page_event;var system=d.page.system.name;switch(system){case('IBE'):if(false){page_event="registration"}else if(d.page.page_code=="FARE"||d.page.page_code=="FARR"||d.page.page_code=="AWFA"){page_event="product_view"}else if(d.page.page_code=="ALPI"||d.page.page_code=="AWPI"||d.page.page_code=="PURR"){page_event="cart"}else if(typeof d.transaction!='undefined'&&!d.indicator.booking_on_hold){page_event="order"}else if(d.indicator.booking_on_hold){page_event="booking_on_hold"}else{page_event="none"}
break;case('TRP'):break;};return(page_event);};DataLayer.Page.prototype.page_category=function(d){var p=d.page
var page_category;switch(p.system.name){case('IBE'):locale=p.locale||Cookies.get('locale')
c=p.page_category+'::'+locale
break;default:c=p.page_category
break;};return(c);};DataLayer.Page.prototype.language=function(d){var p=d.page;var l;switch(p.system.name){case('IBE'):l=p.language||Cookies.get('locale').split('_')[0]
break;default:l=p.language
break;};return(l);};DataLayer.Page.prototype.params=function(d){var p=d.page.system.params;if(typeof p!="undefined"){p.promotion=p.promotion||{};switch(d.page.system.name){case('CQ5'):var params={}
break;case('IBE'):var route=p.route||d.itinerary.route||Cookies.get('route')
Cookies.set('route',route)
var params={date_depart:p.date_depart,date_return:p.date_return,date_depart_and_date_return:[p.date_depart,p.date_return].join('|'),cabin:p.cabin,route:route,external_id:p.external_id,jsession_id:p.jsession_id,flow:p.flow,stream:p.stream,office_id:p.office_id||p.officeID,sitecode:p.sitecode,promotion:{promo_code:p.promotion.promo_code,fare_id:p.promotion.fare_id}}
break;}
return params}}
DataLayer.Page.prototype.search_keyword=function(p){var k;try{switch(p.system.name){case('IBE'):var c=p.page_code
if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AVAI'||c=='AWCR'||c=='AWCL'){var params=p.system.params;if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AVAI'){product='TICKET'}else if(c=='AWCR'||c=='AWCL'){product='AWARD-TKT'}
cabin=DataLayer.Helper.cabin_name(cxDataLayer.itinerary.cabin)
k=[product,cxDataLayer.itinerary.route,cxDataLayer.itinerary.trip_type,cabin].join('::')}
break;case('CQ5'):if(document.URL.indexOf("/press-release/press-release-search-result.html?keyword=")!==-1){k=["Press Release",Arg.query().keyword].join("::")}
break;}}catch(e){console.log(e.message)
k='KEYWORD ERROR'}
return k};DataLayer.Page.prototype.locale=function(d){try{var p=d.page;var locale;switch(p.system.name){case('CQ5'):if(p.page_id!='CX-SPLASH'&&p.page_id!='KA-SPLASH'){locale=document.URL.split('/')[4].split('.')[0]||Cookies.get('selectedLocale')||'en_INTL'}else{locale=Cookies.get('selectedLocale')||'en_INTL'}
break;case('IBE'):locale=document.getElementsByName('ENTRYLANGUAGE')[0]['value']+'_'+document.getElementsByName('ENTRYCOUNTRY')[0]['value']
break;default:locale='en_INTL'
break;}
Cookies.set('locale',locale)
return locale;}catch(e){return Cookies.get('selectedLocale')||Cookies.get('locale');}}
DataLayer.Page.prototype.page_type=function(p){switch(p.system.name){case('CQ5'):var url=document.URL
site_search=url.indexOf('hidden-pages/search-results')!==-1
timetable=url.indexOf('timetable/timetable-search-result-page')!==-1
flight_status=url.indexOf('flight-status/flight-status-search-result-page')!==-1
press_release=url.indexOf('press-release/press-release-search-result')!==-1
faq=url.indexOf('hidden-pages/faq-search-results')!==-1
if(site_search||timetable||flight_status||press_release||faq){page_type='search'}else if(p.page_type=='homepage'){page_type='homepage'}else if(url.indexOf('destinations')!=-1){page_type='destination guide'}else{page_type='content'};break;case('IBE'):map={"CONF":"confirmation","ALPI":"passenger","PURC":"payment"};page_type=map[p.page_code];break;default:page_type=''
break;}
return(page_type);};DataLayer.Member=function(d){try{var m=d.member;if(d.user){var email=d.user.email};var member={member_id:m.membership_no||email,email:m.email,membership_no:m.membership_no,tier:m.tier}
return member}catch(e){cxTagTracker(e,'Member')};};DataLayer.Itinerary=function(d){try{if(d.page.page_id=="IBE::Revenue::Revenue_FlexPricer::Select_Dates"||d.page.page_id=="IBE::Revenue::Revenue_ScheduleDriven::ScheduleDrivenAvailability"||d.page.page_id=="IBE::Revenue::Revenue_FlexPricer::Select_Flights"){var itinerary=cxDataLayer.itinerary}else{var i=d.itinerary;var s=d.itinerary.segments;var itinerary={cabin:i.cabin,summary:[i.route,i.trip_type,i.cabin,i.outbound.date,i.inbound.date].join(":"),datetime_arrival:i.datetime_arrival,datetime_depart:i.datetime_depart,dates_depart:this.concat(s,'dates_depart'),month_depart:moment(i.datetime_depart).format('YYYY-MM'),origin_airport:i.origin_airport,origin_city:i.origin_city,origin_country:i.origin_country,destination_airport:i.destination_airport,destination_city:i.destination_city,trip_type:i.trip_type,days_advance:moment(i.datetime_depart).diff(moment(d.page.timestamp),'days'),days_duration:moment(i.datetime_arrival).diff(moment(i.datetime_depart),'days'),pax:{adult:i.pax.adult,child:i.pax.child,infant:i.pax.infant},pax_count:(i.pax.adult+i.pax.child+i.pax.infant),destination:i.destination,route:i.route,destination_country:i.destination_country,flights:this.concat(s,'flight'),carriers:this.concat(s,'carrier'),rbds:this.concat(s,'rbd'),cabins:this.concat(s,'cabin'),outbound:i.outbound,inbound:i.inbound,airport_stops:this.concat(s,'airport_stops').replace(/LON/g,"LHR").replace(/SEL/g,"ICN").replace(/OSA/g,"KIX"),segments:s}}
return itinerary}catch(e){cxTagTracker(e,'Itinerary')}};DataLayer.Itinerary.prototype.concat=function(array,attr,deliminater){var attrs=[];var deliminater=deliminater||'|';switch(attr){case'airport_stops':for(var i=0;i<array.length;i++){origin_destination=[array[i].origin,array[i].destination].join('_');attrs.push(origin_destination);};break;case'dates_depart':for(var i=0;i<array.length;i++){date_depart=array[i].datetime_depart.split('T')[0];attrs.push(date_depart);};break;default:for(var i=0;i<array.length;i++){attrs.push(array[i][attr]);};};return attrs.join(deliminater);};DataLayer.Products=function(d){try{var products=d.products;var pdts=[];for(var n=0;n<products.length;n++){var product=new DataLayer.Product(products[n],d)
pdts.push(product)}
return pdts}catch(e){cxTagTracker(e,'Products')}};DataLayer.Product=function(product,d){var p=product;var products=[];var currency=d.page.currency;var product_id;var product_name;var product_category;var qty;var ffcode;var tax_and_surcharge;var route=d.itinerary.route;var trip_type=p['trip_type']||d.itinerary.trip_type;var flow=d.page.system.params.flow.toUpperCase();switch(p['type'].toUpperCase()){case'TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=DataLayer.Helper.cabin_name(cabin_code);var ffcode=p['ffcode'];if(flow=='REVENUE_FLEXPRICER'||flow=='REVENUE_COTS'){ffcode=cxDataLayer.indicator.upsell_tracking.split('_').pop();};var farefamily_brand=DataLayer.Helper.farefamily_brand_name(ffcode,flow);var pax_type=p['pax_type']||"UNDEFINED";var product_id=['TICKET',route,trip_type,cabin,farefamily_brand,pax_type].join('::')||'UNDEFINED';var product_name=['TICKET',route,trip_type,cabin].join('::')||'UNDEFINED';var product_category=['TICKET',cabin,farefamily_brand].join('::')||'UNDEFINED';var qty=p['qty']||1;var price=parseFloat(p['price']).toFixed(2)||0.01;var tax_and_surcharge=parseFloat(p['tax']+p['surcharge']).toFixed(2);break;case'AWARD-TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=DataLayer.Helper.cabin_name(cabin_code);var pax_type=p['pax_type'];var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],cxDataLayer.page.system.params.flow);var product_id=['AWARD-TKT',route,trip_type,cabin,farefamily_brand,pax_type].join('::')||'UNDEFINED';var product_name=['AWARD-TKT',route,trip_type,cabin].join('::')||'UNDEFINED';var product_category=['AWARD-TKT',cabin].join('::')||'UNDEFINED';var ffcode=p['ffcode'];var qty=p['qty'];var price=0;var tax_and_surcharge=parseFloat(p['tax']+p['surcharge']).toFixed(2);break;case'ATC-TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=DataLayer.Helper.cabin_name(cabin_code);var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],d.page.system.params.flow);var pax_type=p['pax_type'];var pnr=cxDataLayer.page.system.params.pnr;var product_id=['ATC-TKT',route,trip_type,cabin,farefamily_brand,pax_type,pnr].join('::');var product_name=['ATC-TKT',route,trip_type].join('::');var product_category="ATC-TKT";var ffcode=p['ffcode'];var qty=p['qty'];var price=parseFloat(p.fare_diff).toFixed(2);var tax_and_surcharge=parseFloat(p.tax_and_surcharge_diff).toFixed(2);break;case'AWARD-TOPUP':var cabin_code=p['cabin']||cxDataLayer.itinerary.cabin;var cabin=DataLayer.Helper.cabin_name(cabin_code);var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],cxDataLayer.page.system.params.flow);var pax_type=p['pax_type'];var product_id=['AWARD-TOPUP',route,trip_type,cabin,farefamily_brand,pax_type].join('::');var product_name=["AWARD-TOPUP",route,trip_type];var product_category=["AWARD-TOPUP"];var qty="";var price="";break;case'INSURANCE':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=DataLayer.Helper.cabin_name(cabin_code);var provider=p['provider'];var trip_type=p['trip_type'];var product_id=['INSURANCE',route,trip_type,cabin,provider].join("::");var product_name=['INSURANCE',route,trip_type,cabin].join("::");var product_category=['INSURANCE',trip_type].join("::");var qty=p['qty']||1;var price=parseFloat(p['price']).toFixed(2)||0;break;};return{product_id:product_id.toUpperCase(),product_name:product_name.toUpperCase(),product_category:product_category.toUpperCase(),ffcode:ffcode,qty:qty,price:price,price_with_currency:[currency,price].join('_'),tax_and_surcharge:tax_and_surcharge,tax_and_surcharge_with_currency:[currency,tax_and_surcharge].join('_')};};DataLayer.Transaction=function(d){try{if(d.transaction){var t=d.transaction;var p=d.page;var currency=p.currency;var subtotal=parseFloat(t.payment.subtotal).toFixed(2);var surcharge=parseFloat(t.payment.surcharge).toFixed(2);var total=parseFloat(t.payment.total).toFixed(2);var surcharge_and_tax=parseFloat(this.surcharge_and_tax(d)).toFixed(2);var fxmp_currency=t.payment.fxmp.currency||currency;var fxmp_total=t.payment.fxmp.total||total;var transaction={pnr:t.pnr,order_id:this.order_id(d),ffp:{points:t.ffp.points,type:t.ffp.type},hold_till:moment().add(25,'hours').format('YYYY-MM-DDTHH:00Z'),payment:{currency:currency,fxmp:{currency:fxmp_currency,total:fxmp_total,total_with_currency:[fxmp_currency,fxmp_total].join('_')},method:t.payment.method||'BOH',subtotal:subtotal,subtotal_with_currency:[currency,subtotal].join('_'),surcharge:surcharge||0,tax:t.payment.tax||0,surcharge_and_tax:surcharge_and_tax||0,surcharge_and_tax_with_currency:[currency,surcharge_and_tax].join('_'),total:total,total_with_currency:[currency,total].join('_')}}
return transaction}}catch(e){cxTagTracker(e,'Transaction')}};DataLayer.Transaction.prototype.order_id=function(d){var p=d.page;var date_local=moment(p.timestamp).zone('+0800').format('YYYY-MM-DD');var country=p.country;var brand=p.brand;var system=p.system.name;var stream=p.system.params.stream.substring(0,3);;var pnr=d.transaction.pnr;var pax_indicator=new DataLayer.Indicator(d).pax_indicator;var order_id=[date_local,country,brand,system,stream,pnr,pax_indicator].join('::')
return order_id.toUpperCase();};DataLayer.Transaction.prototype.surcharge_and_tax=function(d){if(d.page.system.params.stream!=='ATC'){var tax_and_surcharge=d.transaction.payment.tax+d.transaction.payment.surcharge;}else{var tax_and_surcharge=DataLayer.Helper.sum(DataLayer.Helper.map(d.products,'tax_and_surcharge_diff'));}
return tax_and_surcharge;};DataLayer.Transaction.prototype.subtotal_in_HKD=function(currency,subtotal){$.ajax({url:'https://tags.tiqcdn.com/utag/tiqapp/utag.currency.js',dataType:"script",type:'GET',async:false,cache:false}).done(function(){if(typeof fx!=="undefined"&&fx.rates){fx.rates=tealiumiq_currency.rates;fx.base="USD";}else{var fxSetup={rates:tealiumiq_currency.rates,base:"USD"}}})
return(fx(subtotal).from(currency).to("HKD")).toFixed(2);};DataLayer.Indicator=function(d){try{var i=d.indicator;var indicator={pax_indicator:this.pax_indicator(d),pnr_with_departure_date:this.pnr_with_departure_date(d),atc_indicator:this.atc_indicator(d),lsa_indicator:i.lsa_indicator,holdable:i.holdable,booking_on_hold:i.booking_on_hold||false,upsell_tracking:this.upsell_tracking(d),upsell_revenue:i.upsell_revenue}
return indicator}catch(e){cxTagTracker(e,'Indicator')};};DataLayer.Indicator.prototype.pax_indicator=function(d){try{if(d.page.system.name=='IBE'&&d.page.page_code!=='GERR'){var pax=d.itinerary.pax;if(typeof pax!="undefined"){var pax_initials=[];for(x in pax){for(var i=0,no_of_pax=pax[x],l=no_of_pax;i<l;i++){pax_initials.push(x.charAt(0).toUpperCase());}};var pax_indicator=DataLayer.Helper.pad(pax_initials.join(''),'0',8,1);return(pax_indicator);};};}catch(e){return('')}};DataLayer.Indicator.prototype.pnr_with_departure_date=function(d){if(d.transaction){date_depart=d.itinerary.datetime_depart.split('T')[0]
date_return=d.itinerary.datetime_arrival.split('T')[0]
date_depart_and_date_return=[date_depart,date_return].join('|')
var p=date_depart_and_date_return+'_'+d.transaction.pnr}
return(p);};DataLayer.Indicator.prototype.atc_indicator=function(d){if(d.page.page_code=='COFR'){var date_local=moment(d.page.timestamp).zone('+0800').format('YYYY-MM-DDTHHmm');var pnr=d.transaction.pnr;var pax=d.itinerary.pax;var pax_count=pax.adult+pax.child+pax.infant;var route=d.itinerary.route;var country=d.itinerary.origin_country;var currency=d.transaction.payment.currency;var atc_tkts=d.products;var total_fare_diff=DataLayer.Helper.sum_with_qty(atc_tkts,'fare_diff');var total_tax_and_surcharge_diff=DataLayer.Helper.sum_with_qty(atc_tkts,'tax_and_surcharge_diff');var change_fee=DataLayer.Helper.sum(DataLayer.Helper.map(atc_tkts,'change_fee'))
var nra=DataLayer.Helper.sum(DataLayer.Helper.map(atc_tkts,'nra'))
return[date_local,pnr,route,country,pax.adult,pax.child,pax.infant,pax_count,currency,total_fare_diff,total_tax_and_surcharge_diff,change_fee,nra].join('::');}};DataLayer.Indicator.prototype.upsell_tracking=function(d){var u=d.indicator.upsell_tracking
if(u=='NOUP_Y'||u=='NOUP_W'||u=='NOUP_C'||u=='NOUP_F'){upsell_tracking='N/A'}else{upsell_tracking=u}
return upsell_tracking};DataLayer.Helper={};DataLayer.Helper.sum=function(array)
{var count=0;for(var i=array.length;i--;){count+=array[i];}
return count};DataLayer.Helper.cabin_name=function(cabin_code){var cabin_map={'Y':'ECONOMY','W':'PEY','C':'BUSINESS','F':'FIRST'};var cabin_name=cabin_map[cabin_code.toUpperCase()];return cabin_name;};DataLayer.Helper.farefamily_brand_name=function(ffcode,flow){var farefamily_brands={flex:{'ECOPR':'SUPERSAVER','ECOVR':'SAVE','ECORS':'SPECIAL','ECOSR':'CORE','ECOSF':'STANDARD','ECOFF':'FLEX','PEYSF':'STANDARD','PEYFF':'FLEX','BUSRS':'SAVE','BUSSF':'STANDARD','BUSFF':'FLEX','FIRSF':'STANDARD','FIRFF':'FLEX'},flex_complex:{'100':'Flex','200':'Standard','300':'Flex','400':'Standard','500':'Save','520':'Flex','550':'Standard','600':'Flex','700':'Standard','800':'Core','900':'Special','1000':'Save','1100':'Supersaver'},promotion:{'GV':'GV','STU':'Student','SNR':'Senior','SBS':'SBS','LEV':'LEVERAGE','LBR':'Domestic-Helper','GS':'fanfares','CC':'Credit-Card','CUG':'CUG','MIC':'MICE','SF':'SPECIAL-FARE','SEA':'SEAMAN'},redemption:{'STDECO':'Standard','STDBUS':'Standard','STDPEY':'Standard','STDFIR':'Standard','PIRECO':'Pirority'}};flow=flow.toUpperCase();if(ffcode.length=='1'){var farefamily_brand_name='SCHEDULE';}else if(flow=='REVENUE_FLEXPRICER'||flow=='REVENUE_COTS'||flow=='ATC_STANDARD_SHOPPER'||flow=='REVENUE_COMPLEXFLEX'||flow=='REVENUE_BOH'){if(ffcode.indexOf('RES_SL')!==-1){var ff_brand_code=ffcode.replace('RES_SL','')
var farefamily_brand_name=farefamily_brands['flex_complex'][ff_brand_code];}else{var cabin_codes=['ECO','BUS','PEY','FIR']
for(var n=0;n<cabin_codes.length;n++){if(ffcode.substring(1).indexOf(cabin_codes[n])!==-1){var ff_brand_code=cabin_codes[n]+ffcode.split(cabin_codes[n])[1].substring(0,2);var farefamily_brand_name=farefamily_brands['flex'][ff_brand_code];break;}}}}else if(flow.indexOf('PROMOTION_')!==-1&&flow.indexOf('REDEMPTION')==-1){var suffix=ffcode.slice(-3)
var promo_identifiers=['YH','GV','STU','SNR','SBS','LEV','LBR','GS','CC','MIC','CUG','SF','SEA']
for(var n=0;n<promo_identifiers.length;n++){if(suffix.indexOf(promo_identifiers[n])!==-1){var ff_brand_code=promo_identifiers[n]
var farefamily_brand_name=farefamily_brands['promotion'][ff_brand_code];break;}}}else if(flow.indexOf('REDEMPTION')){var farefamily_brand_name=farefamily_brands['redemption'][ffcode];}else{var farefamily_brand_name=ffcode};return farefamily_brand_name||ffcode;};DataLayer.Helper.map=function(array,attr){var attrs=[];for(var i=0;i<array.length;i++){attrs.push(eval("array[i]"+'["'+attr.replace(/\./g,'"]["')+'"]'))};return attrs;};DataLayer.Helper.map_with_qty=function(array,attr){var attrs=[];for(var i=0;i<array.length;i++){for(var q=0;q<array[i].qty;q++){attrs.push(eval("array[i]"+'["'+attr.replace(/\./g,'"]["')+'"]'))};};return attrs;};DataLayer.Helper.sum_with_qty=function(array,attr){floats=[];mapped_items=this.map_with_qty(array,attr)
for(var i=0;i<mapped_items.length;i++){floats.push(parseFloat(mapped_items[i]));};var sum=this.sum(floats)
return parseFloat(parseFloat(sum).toFixed(2))};DataLayer.Helper.flatten=function(array){var the_array=[];for(var i=0;i<array.length;i++){var item=array[i]
var qty=item.qty
for(n=0;n<qty;n++){the_array.push(item)}};return the_array;};DataLayer.Helper.pad=function(str,_char,len,to){if(!str||!_char||str.length>=len){return str;}
to=to||0;var ret=str;var max=(len-str.length)/_char.length+1;while(--max){ret=(to)?ret+_char:_char+ret;}
return ret;};DataLayer.Helper.concat=function(array,attr,deliminater){var attrs=[];var deliminater=deliminater||'|';switch(attr){case'airport_stops':for(var i=0;i<array.length;i++){origin_destination=[array[i].origin,array[i].destination].join('_');attrs.push(origin_destination);};break;case'dates_depart':for(var i=0;i<array.length;i++){date_depart=array[i].datetime_depart.split('T')[0];attrs.push(date_depart);};break;default:for(var i=0;i<array.length;i++){attrs.push(array[i][attr]);};};return attrs.join(deliminater);};DataLayer.Helper.flatten=function(ob){var toReturn={};for(var i in ob){if(!ob.hasOwnProperty(i))continue;if(typeof ob[i]=='object'&&!(ob[i]instanceof Array)){var flatObject=DataLayer.Helper.flatten(ob[i]);for(var x in flatObject){if(!flatObject.hasOwnProperty(x))continue;toReturn[i+'.'+x]=flatObject[x];}}else{toReturn[i]=ob[i];}}
return toReturn;};DataLayer.Collection=function(d){if(d.products){this.product=this.product(d.products)};};DataLayer.Collection.prototype.product=function(p){m=DataLayer.Helper.map
return{product_ids:m(p,'product_id'),product_names:m(p,'product_name'),product_categories:m(p,'product_category'),prices:m(p,'price'),qtys:DataLayer.Helper.map(p,'qty'),price_with_currency:m(p,'price_with_currency'),tax_and_surcharge_with_currency:m(p,'tax_and_surcharge_with_currency'),ffcodes:m(p,'ffcode')}}
DataLayer.Event=function(d){try{if(d.indicator.booking_on_hold){return{event_id:["BoH_Hold_Flight",d.itinerary.origin_airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:2,event_point:0}};if(d.page.page_id=='IBE::Revenue::Revenue_BOH::Payment'){return{event_id:['BOH_PAYMENT',d.itinerary.origin_airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:1,event_point:0}};if(d.page.page_id=='IBE::Revenue::Revenue_BOH::Confirmation'){return{event_id:['BOH_PAYMENT',d.itinerary.origin_airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:2,event_point:0}};}catch(e){cxTagTracker(e,'Event')};};datalayer=new DataLayer(cxDataLayer);cxTagLogger('datalayer ready.');utag_data=DataLayer.Helper.flatten(datalayer);}catch(e){}};if(!utag_condload){try{if(datalayer.page.page_id.indexOf('-newsletter-subscription')!==-1){datalayer.event={event_id:"CXpecials Subscription",action_type:"1",category_id:"CXpecials",points:'0'}};}catch(e){}};if(!utag_condload){try{if(datalayer.page.page_id.indexOf('/calculate-and-offset-your-carbon-emissions-result')!==-1){datalayer.event={event_id:"Trip-based::Search",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};if(datalayer.page.page_id.indexOf('/calculate-and-offset-your-carbon-emissions-payment')!==-1){datalayer.event={event_id:"Trip-based::Payment",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};if(datalayer.page.page_id.indexOf('make-a-one-off-contribution-payment')!==-1){datalayer.event={event_id:"Lump Sum::Donation",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};}catch(e){}};if(!utag_condload){try{window.optimizely=window.optimizely||[];window.cxOptimizely=window.cxOptimizely||{};cxOptimizely.event=function(event_name){if(typeof(event_name)!="undefined"&event_name!=""){cxTagLogger("[Optimizely] Event: "+event_name);try{window.optimizely.push(["trackEvent",event_name])}catch(e){cxTagLogger(e)};};};cxOptimizely.dimension=function(dimension_id,value){cxTagLogger("[Optimizely] Dimension: "+dimension_id+" - "+value);window.optimizely.push(['setDimensionValue',dimension_id,value]);};cxOptimizely.set_user_id=function(user_id){cxTagLogger("[Optimizely] User ID: "+user_id);window.optimizely.push(["setUserId",user_id]);};cxOptimizely.revenue=function(transaction_id,subtotal){cxTagLogger("[Optimizely] Revenue: "+transaction_id+"@HKD$"+subtotal);window.optimizely.push(["trackEvent",transaction_id,{"revenue":subtotal*100}]);};cxOptimizely.activate=function(experiment_id){cxTagLogger("[Optimizely] Activated: "+String(experiment_id));window.optimizely.push(["activate",experiment_id]);};cxOptimizely.log=function(){window.optimizely.push(["log"]);};cxOptimizely.push=function(arg){window.optimizely.push(arg)};}catch(e){}};if(!utag_condload){try{try{cxOptimizely.dimension('country',cxDataLayer.page.country);cxOptimizely.dimension('language',cxDataLayer.page.language);cxOptimizely.dimension('locale',cxDataLayer.page.locale);if(typeof(cxDataLayer.itinerary)!="undefined")cxOptimizely.dimension('route',cxDataLayer.itinerary.route);if(typeof(cxDataLayer.itinerary)!="undefined")cxOptimizely.dimension('cabin',cxDataLayer.itinerary.cabin);if(document.domain=="book.cathaypacific.com")cxOptimizely.dimension('flow',cxDataLayer.page.system.params.flow);if(cxDataLayer.page.page_category=="TRP::PACKAGE")cxOptimizely.dimension('flow','Package')
if(cxDataLayer.page.page_category=="TRP::HOTEL")cxOptimizely.dimension('flow','Hotel')
if(typeof(cxDataLayer.itinerary)!="undefined"){var pax=cxDataLayer.itinerary.pax;var pax_type="default";if(pax.child>0||pax.infant>0){pax_type="Family";}
else if(pax.adult==2&&pax.child==0&&pax.infant==0){pax_type="Companion";}
else if(pax.adult>2&&pax.child==0&&pax.infant==0){pax_type="Group";}
else if(pax.adult==1){pax_type="Solo";}
cxOptimizely.dimension('pax_type',pax_type);};}catch(e){cxTagLogger(e);};}catch(e){}};if(!utag_condload){try{if(document.domain=="book.cathaypacific.com"){if(cxDataLayer.page.system.params.flow.toUpperCase()=="REVENUE_FLEXPRICER"){var c=cxDataLayer.page.page_code
var e=(function(c){if(c=="FFCR"||c=="FRCL"){e="[IBE][REV][FP][Step-1] Select Dates"}
else if(c=="FFPR"||c=="FFCO"){e="[IBE][REV][FP][Step-2] Select Flights"}
else if(c=="FARE"){e="[IBE][REV][FP][Step-3] Fare Details"}
else if(c=="ALPI"){e="[IBE][REV][FP][Step-4] Passengers"}
else if(c=="PURC"){e="[IBE][REV][FP][Step-5] Payment"}
else if(c=="CONF"){e="[IBE][REV][FP][Step-6] Confirmation"}
else if(c=="GERR"){e="[IBE][REV][FP][ERROR] Error Page"}
return e})(cxDataLayer.page.page_code)||"";cxOptimizely.event(e);if(c=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")!=-1){cxOptimizely.event("[IBE][REV][FP][Step-6] Confirmation (BOH)")}else if(c=="CONF"){cxOptimizely.event("[IBE][REV][FP][Step-6] Confirmation (Confirmed)")}}
if(cxDataLayer.page.system.params.flow.toUpperCase().indexOf("PROMOTION")!=-1){var c=cxDataLayer.page.page_code
var e=(function(c){if(c=="FFCR"||c=="FRCL"){e="[IBE][REV][PROMO][Step-1] Select Dates"}
else if(c=="FFPR"||c=="FFCO"){e="[IBE][REV][PROMO][Step-2] Select Flights"}
else if(c=="FARE"){e="[IBE][REV][PROMO][Step-3] Fare Details"}
else if(c=="ALPI"){e="[IBE][REV][PROMO][Step-4] Passengers"}
else if(c=="PURC"){e="[IBE][REV][PROMO][Step-5] Payment"}
else if(c=="CONF"){e="[IBE][REV][PROMO][Step-6] Confirmation"}
else if(c=="GERR"){e="[IBE][REV][PROMO][ERROR] Error Page"}
return e})(cxDataLayer.page.page_code)||"";cxOptimizely.event(e);if(c=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")!=-1){cxOptimizely.event("[IBE][REV][PROMO][Step-6] Confirmation (BOH)")}else if(c=="CONF"){cxOptimizely.event("[IBE][REV][PROMO][Step-6] Confirmation (Confirmed)")}}};(function(p){if(document.domain=="holidays.cathaypacific.com"){var e=(function(p){if(p=="TRP::HOTEL::SELECT"){e="[TRP][REV][HOTEL][Step-1] Select"}else if(p=="TRP::HOTEL::REVIEW"){e="[TRP][REV][HOTEL][Step-2] Review[1]"}else if(p=="TRP::HOTEL::SHOPPINGCART"){e="[TRP][REV][HOTEL][Step-3] Review[2]"}else if(p=="TRP::HOTEL::PASSENGERS"){e="[TRP][REV][HOTEL][Step-4] Passengers"}else if(p=="TRP::HOTEL::PAYMENT"){e="[TRP][REV][HOTEL][Step-5] Payment"}else if(p=="TRP::HOTEL::CONFIRMATION"){e="[TRP][REV][HOTEL][Step-6] Confirmation"}
return e})(p)||"";cxOptimizely.event(e);}})(cxDataLayer.page.page_id);(function(p){if(document.domain=="holidays.cathaypacific.com"){var e=(function(p){if(p=="TRP::PACKAGE::SELECT"){e="[TRP][REV][PACKAGE][Step-1] Select"}else if(p=="TRP::PACKAGE::REVIEW"){e="[TRP][REV][PACKAGE][Step-2] Review[1]"}else if(p=="TRP::PACKAGE::SHOPPINGCART"){e="[TRP][REV][PACKAGE][Step-3] Review[2]"}else if(p=="TRP::PACKAGE::PASSENGERS"){e="[TRP][REV][PACKAGE][Step-4] Passengers"}else if(p=="TRP::PACKAGE::PAYMENT"){e="[TRP][REV][PACKAGE][Step-5] Payment"}else if(p=="TRP::PACKAGE::CONFIRMATION"){e="[TRP][REV][PACKAGE][Step-6] Confirmation"}
return e})(p)||"";cxOptimizely.event(e);}})(cxDataLayer.page.page_id);(function(){if(document.URL.indexOf("/book-a-trip/timetable.html")!=-1){cxOptimizely.event("[Timetable] Visit Timetable")}})();(function(){if(document.URL.indexOf("/manage-booking/")!=-1){cxOptimizely.event("[MMB] Visit MMB")}})();}catch(e){}};if(!utag_condload){try{if(document.URL.indexOf("/manage-booking/manage-booking/")!==-1){core_pageID=datalayer.page.page_id;};}catch(e){}};if(!utag_condload){try{if(document.URL.indexOf("trp-interstitial-page-cx.html")>1){trp_promo_profile_id=window.sessionStorage["targetUrl"].split("ProfileId=")[1].split("&")[0];Cookies.set('trp_promo_profile_id',trp_promo_profile_id);};cxTagLogger("")}catch(e){}};if(!utag_condload){try{window.cxDataLayer.registration=cxDataLayer.registration||{};window.cxDataLayer.registration.track=function(user_profile){datalayer.member.member_id=user_profile.membershipNumber;datalayer.member.email=user_profile.email;datalayer.member.tier=user_profile.currentTier;datalayer.member.membership_no=user_profile.membershipNumber;datalayer.member.first_name=user_profile.familyName;datalayer.member.title=user_profile.title;datalayer.member.asia_miles=user_profile.asiaMiles;datalayer.member.club_sectors=user_profile.clubSectors;datalayer.member.club_miles=user_profile.clubMiles;datalayer.member.age_group=(function(a){a=moment().diff(a,'years');if(a<18){g="0-18"}else if(a<24){g="19-24"}else if(a<35){g="25-34"}else if(a<45){g="35-44"}else if(a<55){g="45-54"}else if(a>=55){g="55+"}else{g=""};return g})(user_profile.dateOfBirth);m=datalayer.member
utag.link({"page.page_event":"registration","member.member_id":m.member_id,"member.email":m.email,"member.membership_no":m.membership_no,"member.age_group":m.age_group,"member.tier":m.tier,"member.club_sectors":m.club_sectors,"member.club_miles":m.club_miles,"member.asia_miles":m.asia_miles,"member.title":m.title,"member.first_name":m.first_name});};}catch(e){}};if(!utag_condload){try{try{if(typeof cxDataLayer.page=="undefined"){cxDataLayer.page={};}
cxDataLayer.page.track=function(timestamp_local,brand,page_id,page_id_slashified,page_name,page_category,page_type,page_code,country,language,locale,screen_view,viewport){}
if(typeof cxDataLayer.search=="undefined"){cxDataLayer.search={};}
cxDataLayer.search.track=function(type,keyword,date_outbound,date_inbound,trip_type){if(date_inbound==""){cmCreatePageviewTag(cxDataLayer.page.page_id,cxDataLayer.page_category,keyword,"","-_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_-"+date_outbound);}else{cmCreatePageviewTag(cxDataLayer.page.page_id,cxDataLayer.page_category,keyword,"","-_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_-"+date_outbound+"|"+date_inbound);};}
if(typeof cxDataLayer.event=="undefined"){cxDataLayer.event={};}
cxDataLayer.event.track=function(event_id,event_action,event_category,event_label,event_value){ga('send','event',event_category,event_action,event_label,event_value);}
if(typeof cxTealium=="undefined"){cxTealium={};cxTealium.event={};}
cxTealium.event=function(event_id,event_action,event_category,event_label,event_value){if(typeof event_id!="undefined"&&typeof event_action!="undefined"&&typeof event_category!="undefined"&&typeof event_label!="undefined"&&typeof event_value!="undefined"){ga('send','event',event_category,event_action,event_label,event_value);return'[Tealium] Trigger cxTealium.event successfully and event call was sent to GA';}else{return'[Tealium] Trigger cxTealium.event failed due to missing parameters';}}}catch(e){}}catch(e){}};if(!utag_condload){try{utag_trackingOptOut=function(){document.cookie='utag_optout=1;path=/;domain='+utag.cfg.domain+';expires=expires=Thu, 31 Dec 2099 00:00:00 GMT;'};utag_trackingOptIn=function(){document.cookie='utag_optout=0;path=/;domain='+utag.cfg.domain+';expires=expires=Thu, 31 Dec 2099 00:00:00 GMT;'};if(document.cookie.indexOf('utag_optout=1')>-1){if(typeof utag_cfg_ovrd=='undefined')utag_cfg_ovrd={};utag_cfg_ovrd['noload']=1}}catch(e){}};if(typeof utag=="undefined"&&!utag_condload){var utag={id:"cathaypacific.main",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
utag.handler.RE('view',utag.data,"bwq");if(utag.cfg.load_rules_at_wait){utag.handler.LR();}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'utag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_cathaypacific.main_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},RDdom:function(o){o["dom.referrer"]=eval("document."+"referrer");o["dom.title"]=""+document.title;o["dom.domain"]=""+location.hostname;o["dom.query_string"]=(""+location.search).substring(1);o["dom.hash"]=(""+location.hash).substring(1);o["dom.url"]=""+document.URL;o["dom.pathname"]=""+location.pathname;},RDcp:function(o,b,c,d){b=b||utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o,a,b){a="";try{a=localStorage.getItem("tealium_va");if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(utag.data,b,1);}catch(e){utag.DB("localStorage not supported");}
},RD:function(o,a,b,c,d){utag.DB("utag.loader.RD");if(typeof o["_t_session_id"]!="undefined"){return};a=(new Date()).getTime();b=utag.loader.RC();c=a+parseInt(utag.cfg.session_timeout);d=a;if(!b.utag_main){b.utag_main={};}else if(b.utag_main.ses_id&&typeof b.utag_main._st!="undefined"&&parseInt(b.utag_main._st)<a){delete b.utag_main.ses_id;}
if(!b.utag_main.v_id){b.utag_main.v_id=utag.ut.vi(a);}
if(!b.utag_main.ses_id){b.utag_main.ses_id=d+'';b.utag_main._ss=b.utag_main._pn=1;b.utag_main._sn=1+parseInt(b.utag_main._sn||0);}else{d=b.utag_main.ses_id;b.utag_main._ss=0;b.utag_main._pn=1+parseInt(b.utag_main._pn);b.utag_main._sn=parseInt(b.utag_main._sn);}
if(isNaN(b.utag_main._sn)||b.utag_main._sn<1){b.utag_main._sn=b.utag_main._pn=1}
b.utag_main._st=c+'';utag.loader.SC("utag_main",{"v_id":b.utag_main.v_id,"_sn":b.utag_main._sn,"_ss":b.utag_main._ss,"_pn":b.utag_main._pn+";exp-session","_st":c,"ses_id":d+";exp-session"});o["_t_visitor_id"]=b.utag_main.v_id;o["_t_session_id"]=d;this.RDqp(o);this.RDmeta(o);this.RDcp(o,b);this.RDdom(o);this.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=e.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push(g+":"+encodeURIComponent(d[g]))};if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{utag.sender[a].send('view',utag.handler.C(utag.data));utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(document.readyState!=="loading")setTimeout(c,1);else{if(typeof utag.loader.ready_q=="undefined"){utag.loader.ready_q=[];utag.loader.run_ready_q=function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}}}
utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState!=="loading"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();(function(a,b,c,l){if(typeof utag_err!='undefined'&&utag_err.length>0){a='//uconnect.tealiumiq.com/ulog/_error?utid='+utag.cfg.utid;l=utag_err.length>5?5:utag_err.length;for(b=0;b<l;b++){c=utag_err[b];a+='&e'+b+'='+encodeURIComponent(c.t+'::'+c.l+'::'+c.s+'::'+c.e);}
utag.dbi.push((new Image()).src=a);}})();v=".tiqcdn.com";w=utag.cfg.path.indexOf(v);if(w>0&&b["cp.utag_main__ss"]==1)utag.ut.loader({src:utag.cfg.path.substring(0,w)+v+"/utag/tiqapp/utag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){utag.db_log=[];b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){utag.db_log.push(a);try{console.log(a)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a,cfg:{cb:c,uids:d}})},link:function(a,c){return this.track({event:'link',data:a,cfg:{cb:c}})},track:function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c}};for(d in utag.loader.GV(utag.o)){try{utag.o[d].handler.trigger(a.event||"view",a.data||a,a.cfg)}catch(e){utag.DB(e)};}
if(a.cfg&&a.cfg.cb)try{a.cfg.cb()}catch(e){utag.DB(e)};return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');this.iflag=1;a=utag.loader.q.length;if(a>0){for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.RE(c.a,c.b);utag.handler.trigger(c.a,c.b)}}
utag.cfg.noview=false;},test:function(){return 1},LR:function(){for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.loader.loadrules();utag.loader.initcfg();},RE:function(a,b,c,d,e,f,g){if(c&&!this.cfg_extend){return 0;}
utag.DB('All Tags EXTENSIONS');if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||(typeof c!="undefined"&&f[c]==0)){e=1}else{if(typeof c!="undefined"&&f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(e){utag.rpt['ex_'+d]=1;utag.ut.error({e:e.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a);b=b||{};if(!this.iflag){utag.loader.q.push({a:a,b:b});return;}
utag.ut.merge(b,this.df,0);utag.loader.RDqp(b);utag.loader.RDcp(b);utag.loader.RDdom(b);utag.loader.RDmeta(b);utag.loader.RDva(b);if(c&&c.uids){this.RE(a,b);for(f=0;f<c.uids.length;f++){d=c.uids[f];try{if(typeof utag.sender[d]!="undefined"){utag.sender[d].send(a,utag.handler.C(b));}else if(a=="view"&&utag.loader.cfg[d].load!=2&&utag.loader.cfg[d].s2s!=1){utag.ut.merge(utag.data,b,1);utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");utag.ut.merge(utag.data,b,1);this.LR();this.RE(a,b);for(d in utag.loader.cfg){try{if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){if(typeof utag.sender[d]!="undefined"){utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(a=="view"&&utag.loader.cfg[d].load!=2&&utag.loader.cfg[d].s2s!=1){utag.loader.AS({id:d,load:1});}}}catch(e){utag.DB(e)}}}else{this.RE(a,b);for(d in utag.loader.GV(utag.sender)){try{utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}catch(e){utag.DB(e)}}}},C:function(a,b,c,d){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};return a},isEmptyObject:function(o,a){for(a in o){return false;}
return true;},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}
c="";for(b in a){c+=b+":"+a[b]+" , "};utag.DB(c)},loader:function(o,a,b,c,l){a=document;if(o.type=="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}
if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",o.cb,false);}
else if(b.readyState){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState=='complete'||this.readyState=='loaded')&&!b.hFlag){b.hFlag=1;o.cb()}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb()}}}}
l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}};utag.o['cathaypacific.main']=utag;utag.cfg={v:"ut4.30.201508270937",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),path:"//tags.tiqcdn.com/utag/cathaypacific/main/prod/",utid:"cathaypacific/main/201508260315"};utag.cond={100:0,102:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,122:0,123:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,14:0,15:0,22:0,23:0,24:0,27:0,28:0,29:0,2:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,3:0,40:0,41:0,42:0,43:0,44:0,47:0,48:0,4:0,52:0,53:0,55:0,58:0,59:0,5:0,60:0,63:0,64:0,68:0,69:0,6:0,70:0,71:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,7:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,8:0,90:0,91:0,92:0,93:0,94:0,95:0,97:0,98:0,99:0,9:0};utag.pagevars=function(){try{utag.data['js_page.cxDataLayer.cart.pnr']=cxDataLayer.cart.pnr}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.trp.subtotal']=cxDataLayer.trp.subtotal}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.trp.tax']=cxDataLayer.trp.tax}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.trp.total']=cxDataLayer.trp.total}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.itinerary.destination_airport']=cxDataLayer.itinerary.destination_airport}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.itinerary.origin_airport']=cxDataLayer.itinerary.origin_airport}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.page.page_id']=cxDataLayer.page.page_id}catch(e){utag.DB(e)};try{utag.data['js_page.cxDataLayer.error']=cxDataLayer.error}catch(e){utag.DB(e)};};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(){try{utag.cond[100]|=(utag.data['page.country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0)}catch(e){utag.DB(e)};try{utag.cond[102]|=(utag.data['dom.url'].toString().indexOf('/destinations/hotels-in')>-1)}catch(e){utag.DB(e)};try{utag.cond[108]|=(utag.data['dom.url'].toString().indexOf('/destinations/-holiday-packages')>-1)}catch(e){utag.DB(e)};try{utag.cond[109]|=(utag.data['dom.url'].toString().indexOf('/offers-from-')>-1)}catch(e){utag.DB(e)};try{utag.cond[110]|=(utag.data['dom.url'].toString().indexOf('/offers-from--to-all-destinations')>-1)}catch(e){utag.DB(e)};try{utag.cond[111]|=(utag.data['dom.url'].toString().indexOf('/offers.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[112]|=(/[\/]offers-from-([\w\s\t\r\n\f-]*)-to-([\w\s\t\r\n\f-]*).html/.test(utag.data['dom.url']))}catch(e){utag.DB(e)};try{utag.cond[113]|=(utag.data['dom.url'].toString().indexOf('en_HK/offers/flight/fly-non-stop-hong-kong-dusseldorf.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[114]|=(utag.data['dom.url'].toString().indexOf('zh_HK/offers/flight/fly-non-stop-hong-kong-dusseldorf.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[115]|=(utag.data['dom.url'].toString().indexOf('/travel-information/hiroshima-port/hiroshima-route')>-1)}catch(e){utag.DB(e)};try{utag.cond[116]|=(utag.data['dom.url'].toString().indexOf('/travel-information/hiroshima-port/hiroshima-route')>-1)}catch(e){utag.DB(e)};try{utag.cond[122]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/collection/uk-europe-earlybird-2016')>-1)}catch(e){utag.DB(e)};try{utag.cond[123]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/collection/usa-canada-earlybird-2016.htm')>-1)}catch(e){utag.DB(e)};try{utag.cond[125]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-amsterdam.htm')>-1)}catch(e){utag.DB(e)};try{utag.cond[126]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/business-class-to-uk-europe')>-1)}catch(e){utag.DB(e)};try{utag.cond[127]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-frankfurt-dusseldorf-zurich')>-1)}catch(e){utag.DB(e)};try{utag.cond[128]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-rome-milan')>-1)}catch(e){utag.DB(e)};try{utag.cond[129]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-paris.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[130]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/premium-economy-class-to-uk-europe')>-1)}catch(e){utag.DB(e)};try{utag.cond[131]|=(utag.data['dom.url'].toString().indexOf('TBC')>-1)}catch(e){utag.DB(e)};try{utag.cond[132]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-london-manchester')>-1)}catch(e){utag.DB(e)};try{utag.cond[133]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/business-class-to-usa-canada')>-1)}catch(e){utag.DB(e)};try{utag.cond[134]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/economy-class-to-canada')>-1)}catch(e){utag.DB(e)};try{utag.cond[135]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/economy-class-to-usa')>-1)}catch(e){utag.DB(e)};try{utag.cond[136]|=(utag.data['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/premium-economy-class-to-usa-canada')>-1)}catch(e){utag.DB(e)};try{utag.cond[137]|=(utag.data['dom.url'].toString().indexOf('/offers/collection/australia-well-travelled')>-1)}catch(e){utag.DB(e)};try{utag.cond[138]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-adelaide-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[139]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-brisbane-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[14]|=(utag.data['page.country']=='GB')}catch(e){utag.DB(e)};try{utag.cond[140]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-cairns-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[141]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-melbourne-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[142]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-perth-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[143]|=(utag.data['dom.url'].toString().indexOf('/offers/flight/travel-well-in-sydney-origin-')>-1)}catch(e){utag.DB(e)};try{utag.cond[15]|=(utag.data['page.page_type']=='homepage')}catch(e){utag.DB(e)};try{utag.cond[2]|=(/^IBE::/.test(utag.data['page.page_id']))}catch(e){utag.DB(e)};try{utag.cond[22]|=(utag.data['dom.domain'].toString().indexOf('cathaypacific.com')>-1)}catch(e){utag.DB(e)};try{utag.cond[23]|=(utag.data['dom.domain'].toString().indexOf('dragonair.com')>-1)}catch(e){utag.DB(e)};try{utag.cond[24]|=(/^IBE/i.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().toLowerCase().indexOf('CONFIRMATION'.toLowerCase())>-1&&utag.data['page.page_id'].toString().toLowerCase().indexOf('CONFIRMATION-BOH'.toLowerCase())<0)}catch(e){utag.DB(e)};try{utag.cond[27]|=(utag.data['dom.url'].toString().indexOf('/frequent-flyers/about-asia-miles.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[28]|=(utag.data['dom.url'].toString().indexOf('/frequent-flyers/about-the-club.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[29]|=(utag.data['dom.url'].toString().indexOf('/book-a-trip.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[3]|=(/^IBE::/.test(utag.data['page.page_id'])&&utag.data['page.page_code'].toString().toLowerCase()=='CONF'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[30]|=(utag.data['dom.url'].toString().indexOf('/book-a-trip/book-flights/book-flights-now.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[31]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/business-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[32]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/new-regional-business-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[33]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/regional-business-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[34]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/economy-class/economy.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[35]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/first-class/first-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[36]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/economy-class/new-economy-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[37]|=(utag.data['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/premium-economy-class/premium-economy-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[38]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to')>-1)}catch(e){utag.DB(e)};try{utag.cond[39]|=(utag.data['dom.url'].toString().indexOf('/destinations.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[4]|=(/^IBE/.test(utag.data['js_page.cxDataLayer.page.page_id'])&&utag.data['js_page.cxDataLayer.page.page_id'].toString().indexOf('Fare_Details')>-1)}catch(e){utag.DB(e)};try{utag.cond[40]|=(utag.data['dom.url'].toString().indexOf('/destinations/things-to-do-in')>-1)}catch(e){utag.DB(e)};try{utag.cond[41]|=(utag.data['dom.url'].toString().indexOf('/frequent-flyers.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[42]|=(utag.data['dom.url'].toString().indexOf('/latest-offers.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[43]|=(utag.data['dom.url'].toString().indexOf('/latest-offers/subscribe-offers/newsletter-subscription.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[44]|=(utag.data['dom.url'].toString().indexOf('cxholidays.com/chl/r/homepage')>-1)}catch(e){utag.DB(e)};try{utag.cond[47]|=(utag.data['page.page_id'].toString().indexOf('fanfares Landing Page')>-1)}catch(e){utag.DB(e)};try{utag.cond[48]|=(/^IBE/.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().indexOf('Select_Dates')>-1)}catch(e){utag.DB(e)};try{utag.cond[5]|=(/^IBE/i.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().toLowerCase().indexOf('Passengers'.toLowerCase())>-1)}catch(e){utag.DB(e)};try{utag.cond[52]|=(utag.data['dom.url'].toString().indexOf('/campaign/marketing/life-well-travelled')>-1)||(utag.data['dom.url'].toString().indexOf('lifewelltravelled.cathaypacific.com')>-1)}catch(e){utag.DB(e)};try{utag.cond[53]|=(utag.data['page.country'].toString().toLowerCase()=='JP'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[55]|=(utag.data['page.country'].toString().toLowerCase()=='CA'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[58]|=(utag.data['page.currency'].toString().toLowerCase()=='GBP'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[59]|=(utag.data['itinerary.origin_country'].toString().toLowerCase()=='GB'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[6]|=(/^IBE/.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().indexOf('Select_Dates')>-1)}catch(e){utag.DB(e)};try{utag.cond[60]|=(utag.data['cp.cm_mmc'].toString().indexOf('AFFILIATEFUTURE')>-1)}catch(e){utag.DB(e)};try{utag.cond[63]|=(utag.data['dom.url'].toString().indexOf('fr_FR/flightoffer.vols-classe-economique.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[64]|=(utag.data['page.country'].toString().toLowerCase()=='HK'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[68]|=(utag.data['dom.url'].toString().indexOf('cx/fr_FR/flightoffer.vols-classe-affaires-magic-summer.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[69]|=(utag.data['page.country'].toString().toLowerCase()=='US'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[7]|=(/^IBE/i.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().toLowerCase().indexOf('Select_Flights'.toLowerCase())>-1)}catch(e){utag.DB(e)};try{utag.cond[70]|=(utag.data['dom.url'].toString().indexOf('/cx/zh_HK/hidden-pages/special-highlight/travel-information/manchester-port/manchester-route.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[71]|=(utag.data['dom.url'].toString().indexOf('/cx/en_HK/hidden-pages/special-highlight/travel-information/manchester-port/manchester-route.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[73]|=(utag.data['page.country'].toString().toLowerCase()=='AU'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[74]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-hong-kong.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[75]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-chengdu.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[76]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-fuzhou.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[77]|=(utag.data['dom.url'].toString().indexOf('destinations/flights-to-sapporo.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[78]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-shanghai.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[79]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-beijing.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[8]|=(/^IBE/.test(utag.data['page.page_id'])&&utag.data['page.page_id'].toString().indexOf('Payment')>-1)}catch(e){utag.DB(e)};try{utag.cond[80]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-london.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[81]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-paris.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[82]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-rome.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[83]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-frankfurt.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[84]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-zurich.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[85]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-manchester.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[86]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-new-york.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[87]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-boston.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[88]|=(utag.data['dom.url'].toString().indexOf('/destinations/flights-to-vancouver.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[89]|=(utag.data['dom.url'].toString().indexOf('/destinations.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[9]|=(utag.data['page.system.params.stream'].toString().toLowerCase().indexOf('REVENUE'.toLowerCase())>-1)}catch(e){utag.DB(e)};try{utag.cond[90]|=(utag.data['page.country'].toString().toLowerCase().indexOf('NL'.toLowerCase())>-1)}catch(e){utag.DB(e)};try{utag.cond[91]|=(utag.data['page.language'].toString().indexOf('zh')>-1)}catch(e){utag.DB(e)};try{utag.cond[92]|=(utag.data['page.language'].toString().indexOf('en')>-1)}catch(e){utag.DB(e)};try{utag.cond[93]|=(utag.data['page.language'].toString().indexOf('nl')>-1)}catch(e){utag.DB(e)};try{utag.cond[94]|=(utag.data['dom.url'].toString().indexOf('/flightoffer.vliegtickets-amsterdam-australie.economy-class.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[95]|=(utag.data['dom.url'].toString().indexOf('/latest-offers/other-offers/other-offers/family/')>-1)}catch(e){utag.DB(e)};try{utag.cond[97]|=(utag.data['dom.url'].toString().indexOf('/latest-offers/other-offers/other-offers/3rd-sfo-hkg-flight.html')>-1)}catch(e){utag.DB(e)};try{utag.cond[98]|=(utag.data['page.country'].toString().toLowerCase()=='KR'.toLowerCase())}catch(e){utag.DB(e)};try{utag.cond[99]|=(/(.*)(australia-well-travelled|australiawelltravelled)(.*)/.test(utag.data['dom.url'])&&/(CN|KR|HK|JP)/.test(utag.data['page.country']))}catch(e){utag.DB(e)};};utag.pre=function(){utag.loader.initdata();utag.pagevars();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){if(datalayer.page.page_id=='TRP::PACKAGE::CONFIRMATION'||datalayer.page.page_id=='TRP::HOTEL::CONFIRMATION'){utag_data["transaction.payment.total"]=document.getElementById("totalPayment").innerHTML.replace(/[^0-9\.]+/g,"");utag_data["transaction.payment.total_with_currency"]=[cxDataLayer.page.currency,utag_data["transaction.payment.total"]].join("_");var pnr_super=document.getElementById("booking-reference").innerHTML.split("&nbsp;").pop();var pnr=document.getElementsByTagName("h2")[0].innerHTML.split(" - ").pop().substr(0,6);utag_data["transaction.pnr"]=[pnr_super,pnr].join("|");};}];utag.handler.cfg_extend=[{"alr":1,"bwq":0,"id":"164","blr":0,"end":0}];utag.loader.initcfg=function(){utag.loader.cfg={"41":{load:1,send:0,wait:0,tid:20060,src:"//tags.tiqcdn.com/utag/tiqapp/utag.currency.js"},"84":{load:4,send:1,wait:1,tid:3101},"162":{load:4,send:utag.cond[2],wait:1,tid:15022},"76":{load:4,send:1,wait:1,tid:7110},"56":{load:1,send:1,wait:1,tid:20064},"80":{load:utag.cond[24],send:1,wait:1,tid:7110},"118":{load:(utag.cond[6]&&utag.cond[9]),send:1,wait:1,tid:4001},"133":{load:(utag.cond[7]&&utag.cond[9]),send:1,wait:1,tid:4001},"134":{load:(utag.cond[4]&&utag.cond[9]),send:1,wait:1,tid:4001},"135":{load:(utag.cond[5]&&utag.cond[9]),send:1,wait:1,tid:4001},"136":{load:(utag.cond[8]&&utag.cond[9]),send:1,wait:1,tid:4001},"137":{load:(utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:4001},"138":{load:utag.cond[27],send:1,wait:1,tid:4001},"139":{load:utag.cond[28],send:1,wait:1,tid:4001},"140":{load:utag.cond[29],send:1,wait:1,tid:4001},"141":{load:utag.cond[30],send:1,wait:1,tid:4001},"142":{load:utag.cond[31],send:1,wait:1,tid:4001},"143":{load:utag.cond[32],send:1,wait:1,tid:4001},"144":{load:utag.cond[33],send:1,wait:1,tid:4001},"145":{load:utag.cond[34],send:1,wait:1,tid:4001},"146":{load:utag.cond[35],send:1,wait:1,tid:4001},"147":{load:utag.cond[36],send:1,wait:1,tid:4001},"148":{load:utag.cond[37],send:1,wait:1,tid:4001},"149":{load:utag.cond[15],send:1,wait:1,tid:4001},"150":{load:utag.cond[38],send:1,wait:1,tid:4001},"151":{load:utag.cond[39],send:1,wait:1,tid:4001},"152":{load:utag.cond[40],send:1,wait:1,tid:4001},"153":{load:utag.cond[41],send:1,wait:1,tid:4001},"154":{load:utag.cond[42],send:1,wait:1,tid:4001},"155":{load:utag.cond[43],send:1,wait:1,tid:4001},"156":{load:utag.cond[44],send:1,wait:1,tid:4001},"157":{load:utag.cond[47],send:1,wait:1,tid:4001},"221":{load:utag.cond[52],send:1,wait:1,tid:4001},"164":{load:(utag.cond[53]&&utag.cond[6]&&utag.cond[9]),send:1,wait:1,tid:20067},"167":{load:(utag.cond[53]&&utag.cond[7]&&utag.cond[9]),send:1,wait:1,tid:20067},"168":{load:(utag.cond[53]&&utag.cond[4]&&utag.cond[9]),send:1,wait:1,tid:20067},"169":{load:(utag.cond[53]&&utag.cond[5]&&utag.cond[9]),send:1,wait:1,tid:20067},"170":{load:(utag.cond[53]&&utag.cond[8]&&utag.cond[9]),send:1,wait:1,tid:20067},"171":{load:(utag.cond[53]&&utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:20067},"172":{load:(utag.cond[53]&&utag.cond[27]),send:1,wait:1,tid:20067},"173":{load:(utag.cond[53]&&utag.cond[28]),send:1,wait:1,tid:20067},"174":{load:(utag.cond[53]&&utag.cond[29]),send:1,wait:1,tid:20067},"175":{load:(utag.cond[53]&&utag.cond[30]),send:1,wait:1,tid:20067},"176":{load:(utag.cond[53]&&utag.cond[31]),send:1,wait:1,tid:20067},"177":{load:(utag.cond[53]&&utag.cond[32]),send:1,wait:1,tid:20067},"178":{load:(utag.cond[53]&&utag.cond[33]),send:1,wait:1,tid:20067},"179":{load:(utag.cond[53]&&utag.cond[34]),send:1,wait:1,tid:20067},"180":{load:(utag.cond[53]&&utag.cond[35]),send:1,wait:1,tid:20067},"181":{load:(utag.cond[53]&&utag.cond[36]),send:1,wait:1,tid:20067},"182":{load:(utag.cond[53]&&utag.cond[37]),send:1,wait:1,tid:20067},"183":{load:(utag.cond[53]&&utag.cond[15]),send:1,wait:1,tid:20067},"184":{load:(utag.cond[53]&&utag.cond[38]),send:1,wait:1,tid:20067},"185":{load:(utag.cond[53]&&utag.cond[39]),send:1,wait:1,tid:20067},"186":{load:(utag.cond[53]&&utag.cond[40]),send:1,wait:1,tid:20067},"187":{load:(utag.cond[53]&&utag.cond[41]),send:1,wait:1,tid:20067},"188":{load:(utag.cond[53]&&utag.cond[42]),send:1,wait:1,tid:20067},"189":{load:(utag.cond[53]&&utag.cond[43]),send:1,wait:1,tid:20067},"190":{load:(utag.cond[53]&&utag.cond[47]),send:1,wait:1,tid:20067},"165":{load:(utag.cond[53]&&utag.cond[47]),send:1,wait:1,tid:20040},"191":{load:(utag.cond[48]&&utag.cond[9]&&utag.cond[53]),send:1,wait:1,tid:20040},"192":{load:(utag.cond[53]&&utag.cond[7]&&utag.cond[9]),send:1,wait:1,tid:20040},"193":{load:(utag.cond[53]&&utag.cond[4]&&utag.cond[9]),send:1,wait:1,tid:20040},"194":{load:(utag.cond[53]&&utag.cond[5]&&utag.cond[9]),send:1,wait:1,tid:20040},"195":{load:(utag.cond[53]&&utag.cond[8]&&utag.cond[9]),send:1,wait:1,tid:20040},"196":{load:(utag.cond[53]&&utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:20040},"197":{load:(utag.cond[53]&&utag.cond[27]),send:1,wait:1,tid:20040},"198":{load:(utag.cond[53]&&utag.cond[28]),send:1,wait:1,tid:20040},"199":{load:(utag.cond[53]&&utag.cond[29]),send:1,wait:1,tid:20040},"200":{load:(utag.cond[53]&&utag.cond[30]),send:1,wait:1,tid:20040},"201":{load:(utag.cond[53]&&utag.cond[31]),send:1,wait:1,tid:20040},"202":{load:(utag.cond[53]&&utag.cond[32]),send:1,wait:1,tid:20040},"203":{load:(utag.cond[53]&&utag.cond[33]),send:1,wait:1,tid:20040},"204":{load:(utag.cond[53]&&utag.cond[34]),send:1,wait:1,tid:20040},"205":{load:(utag.cond[53]&&utag.cond[35]),send:1,wait:1,tid:20040},"206":{load:(utag.cond[53]&&utag.cond[36]),send:1,wait:1,tid:20040},"207":{load:(utag.cond[53]&&utag.cond[37]),send:1,wait:1,tid:20040},"208":{load:(utag.cond[53]&&utag.cond[38]),send:1,wait:1,tid:20040},"209":{load:(utag.cond[53]&&utag.cond[39]),send:1,wait:1,tid:20040},"210":{load:(utag.cond[53]&&utag.cond[40]),send:1,wait:1,tid:20040},"211":{load:(utag.cond[53]&&utag.cond[41]),send:1,wait:1,tid:20040},"212":{load:(utag.cond[53]&&utag.cond[42]),send:1,wait:1,tid:20040},"213":{load:(utag.cond[53]&&utag.cond[43]),send:1,wait:1,tid:20040},"224":{load:(utag.cond[22]&&utag.cond[100]),send:1,wait:1,tid:3015},"227":{load:(utag.cond[14]&&utag.cond[15]),send:1,wait:1,tid:18016},"228":{load:(utag.cond[14]&&utag.cond[15]),send:1,wait:1,tid:20067},"229":{load:(utag.cond[14]&&utag.cond[15]),send:1,wait:1,tid:20067},"230":{load:(utag.cond[14]&&utag.cond[30]),send:1,wait:1,tid:20067},"231":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:18016},"232":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:20067},"233":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,wait:1,tid:20067},"237":{load:(utag.cond[55]&&utag.cond[15]),send:1,wait:1,tid:20067},"238":{load:(utag.cond[55]&&utag.cond[15]),send:1,wait:1,tid:20067},"249":{load:(utag.cond[60]&&utag.cond[14]&&utag.cond[58]&&utag.cond[59]&&utag.cond[24]&&utag.cond[9]),send:1,wait:1,tid:20010},"261":{load:(utag.cond[14]&&utag.cond[15]),send:1,wait:1,tid:20067},"264":{load:(utag.cond[14]&&utag.cond[4]&&utag.cond[9]),send:1,wait:1,tid:20067},"265":{load:(utag.cond[14]&&utag.cond[5]&&utag.cond[9]),send:1,wait:1,tid:20067},"266":{load:utag.cond[14],send:1,wait:1,tid:7115},"267":{load:(utag.cond[14]&&utag.cond[15]),send:1,wait:1,tid:20067},"268":{load:(utag.cond[14]&&utag.cond[8]&&utag.cond[9]),send:1,wait:1,tid:20067},"270":{load:utag.cond[63],send:1,wait:1,tid:4001},"275":{load:(utag.cond[14]&&utag.cond[24]),send:1,wait:1,tid:20067},"287":{load:utag.cond[68],send:1,wait:1,tid:4001},"288":{load:utag.cond[69],send:1,wait:1,tid:7115},"289":{load:(utag.cond[53]&&utag.cond[15]),send:1,wait:1,tid:20067},"290":{load:(utag.cond[53]&&utag.cond[48]),send:1,wait:1,tid:20067},"291":{load:(utag.cond[53]&&utag.cond[4]),send:1,wait:1,tid:20067},"294":{load:(utag.cond[53]&&utag.cond[24]),send:1,wait:1,tid:20067},"295":{load:(utag.cond[53]&&utag.cond[52]),send:1,wait:1,tid:20067},"297":{load:(utag.cond[53]&&utag.cond[15]),send:1,wait:1,tid:20040},"298":{load:(utag.cond[53]&&utag.cond[48]),send:1,wait:1,tid:20040},"299":{load:(utag.cond[53]&&utag.cond[4]),send:1,wait:1,tid:20040},"300":{load:(utag.cond[53]&&utag.cond[24]),send:1,wait:1,tid:20040},"301":{load:utag.cond[52],send:1,wait:1,tid:20040},"302":{load:(utag.cond[53]&&utag.cond[4]),send:1,wait:1,tid:7117},"303":{load:(utag.cond[53]&&utag.cond[24]),send:1,wait:1,tid:7117},"304":{load:(utag.cond[53]&&utag.cond[48]),send:1,wait:1,tid:7117},"305":{load:utag.cond[53],send:1,wait:1,tid:7115},"307":{load:(utag.cond[53]&&utag.cond[7]),send:1,wait:1,tid:20067},"308":{load:(utag.cond[53]&&utag.cond[4]),send:1,wait:1,tid:20067},"309":{load:(utag.cond[53]&&utag.cond[24]),send:1,wait:1,tid:20067},"335":{load:utag.cond[53],send:1,wait:1,tid:20067},"337":{load:utag.cond[70],send:1,wait:1,tid:4001},"338":{load:utag.cond[71],send:1,wait:1,tid:4001},"342":{load:1,send:1,wait:1,tid:7127},"365":{load:(utag.cond[53]&&utag.cond[48]),send:1,wait:1,tid:20067},"366":{load:(utag.cond[53]&&utag.cond[4]),send:1,wait:1,tid:20067},"367":{load:(utag.cond[53]&&utag.cond[24]),send:1,wait:1,tid:20067},"382":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[74]),send:1,wait:1,tid:6025},"384":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[75]),send:1,wait:1,tid:6025},"385":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[76]),send:1,wait:1,tid:6025},"386":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[77]),send:1,wait:1,tid:6025},"387":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[78]),send:1,wait:1,tid:6025},"388":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[79]),send:1,wait:1,tid:6025},"389":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[80]),send:1,wait:1,tid:6025},"390":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[81]),send:1,wait:1,tid:6025},"391":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[82]),send:1,wait:1,tid:6025},"392":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[83]),send:1,wait:1,tid:6025},"393":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[84]),send:1,wait:1,tid:6025},"394":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[85]),send:1,wait:1,tid:6025},"395":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[86]),send:1,wait:1,tid:6025},"396":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[87]),send:1,wait:1,tid:6025},"397":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[88]),send:1,wait:1,tid:6025},"398":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[48]),send:1,wait:1,tid:20040},"399":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[24]),send:1,wait:1,tid:20040},"400":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[15]),send:1,wait:1,tid:6025},"401":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[89]),send:1,wait:1,tid:6025},"402":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[94]),send:1,wait:1,tid:6025},"403":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[94]),send:1,wait:1,tid:20040},"404":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[15]),send:1,wait:1,tid:4001},"405":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[15]),send:1,wait:1,tid:4001},"407":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[95]),send:1,wait:1,tid:4001},"408":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[95]),send:1,wait:1,tid:4001},"410":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[95]),send:1,wait:1,tid:4001},"411":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[95]),send:1,wait:1,tid:4001},"412":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[92]&&utag.cond[97]),send:1,wait:1,tid:4001},"413":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[92]&&utag.cond[97]),send:1,wait:1,tid:4001},"417":{load:(utag.cond[22]&&utag.cond[53]&&utag.cond[5]),send:1,wait:1,tid:20067},"419":{load:(utag.cond[22]&&utag.cond[53]&&utag.cond[92]&&utag.cond[15]),send:1,wait:1,tid:20067},"421":{load:1,send:1,wait:1,tid:19003},"422":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[48]),send:1,wait:1,tid:4001},"423":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[24]),send:1,wait:1,tid:4001},"425":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[94]),send:1,wait:1,tid:4001},"428":{load:(utag.cond[22]&&utag.cond[99]),send:1,wait:1,tid:20011},"429":{load:(utag.cond[22]&&utag.cond[55]&&utag.cond[64]&&utag.cond[15]),send:1,wait:1,tid:20010},"430":{load:(utag.cond[22]&&utag.cond[55]&&utag.cond[64]&&utag.cond[24]),send:1,wait:1,tid:20010},"431":{load:(utag.cond[22]&&utag.cond[53]),send:1,wait:1,tid:20010},"432":{load:(utag.cond[22]&&utag.cond[53]),send:1,wait:1,tid:20067},"434":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[97]),send:1,wait:1,tid:20067},"437":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[97]),send:1,wait:1,tid:20010},"439":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,wait:1,tid:20078},"451":{load:(utag.cond[22]&&utag.cond[24]),send:1,wait:1,tid:20011},"452":{load:utag.cond[102],send:1,wait:1,tid:4001},"458":{load:utag.cond[108],send:1,wait:1,tid:4001},"460":{load:utag.cond[110],send:1,wait:1,tid:4001},"464":{load:utag.cond[111],send:1,wait:1,tid:4001},"465":{load:utag.cond[109],send:1,wait:1,tid:4001},"467":{load:utag.cond[112],send:1,wait:1,tid:4001},"469":{load:(utag.cond[98]&&utag.cond[15]),send:1,wait:1,tid:4001},"470":{load:(utag.cond[98]&&utag.cond[15]),send:1,wait:1,tid:20040},"474":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[113]),send:1,wait:1,tid:4001},"475":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[114]),send:1,wait:1,tid:4001},"476":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[115]),send:1,wait:1,tid:4001},"477":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[115]),send:1,wait:1,tid:4001},"481":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[113]),send:1,wait:1,tid:20067},"482":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[114]),send:1,wait:1,tid:20067},"483":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[48]),send:1,wait:1,tid:20067},"486":{load:(utag.cond[22]&&utag.cond[15]),send:1,wait:1,tid:20011},"487":{load:(utag.cond[2]&&utag.cond[92]),send:1,wait:1,tid:20010},"488":{load:(utag.cond[2]&&utag.cond[91]),send:1,wait:1,tid:20010},"489":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[116]),send:1,wait:1,tid:4001},"492":{load:(utag.cond[98]&&utag.cond[15]),send:1,wait:1,tid:20010},"497":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[24]),send:1,wait:1,tid:6020},"503":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[122]),send:1,wait:1,tid:4001},"504":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[123]),send:1,wait:1,tid:4001},"505":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[125]),send:1,wait:1,tid:4001},"506":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[126]),send:1,wait:1,tid:4001},"507":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[127]),send:1,wait:1,tid:4001},"508":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[128]),send:1,wait:1,tid:4001},"509":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[129]),send:1,wait:1,tid:4001},"510":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[130]),send:1,wait:1,tid:4001},"511":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[131]),send:1,wait:1,tid:4001},"512":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[132]),send:1,wait:1,tid:4001},"513":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[133]),send:1,wait:1,tid:4001},"514":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[134]),send:1,wait:1,tid:4001},"515":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[135]),send:1,wait:1,tid:4001},"516":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[136]),send:1,wait:1,tid:4001},"517":{load:(utag.cond[22]&&utag.cond[137]),send:1,wait:1,tid:4001},"518":{load:(utag.cond[22]&&utag.cond[138]),send:1,wait:1,tid:4001},"519":{load:(utag.cond[22]&&utag.cond[139]),send:1,wait:1,tid:4001},"520":{load:(utag.cond[22]&&utag.cond[140]),send:1,wait:1,tid:4001},"521":{load:(utag.cond[22]&&utag.cond[141]),send:1,wait:1,tid:4001},"522":{load:(utag.cond[22]&&utag.cond[142]),send:1,wait:1,tid:4001},"523":{load:(utag.cond[22]&&utag.cond[143]),send:1,wait:1,tid:4001}};utag.loader.cfgsort=["41","84","162","76","56","80","118","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","221","164","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","165","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","224","227","228","229","230","231","232","233","237","238","249","261","264","265","266","267","268","270","275","287","288","289","290","291","294","295","297","298","299","300","301","302","303","304","305","307","308","309","335","337","338","342","365","366","367","382","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","407","408","410","411","412","413","417","419","421","422","423","425","428","429","430","431","432","434","437","439","451","452","458","460","464","465","467","469","470","474","475","476","477","481","482","483","486","487","488","489","492","497","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(var i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[i]=utag_cfg_ovrd[i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR();}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!='')){a[b].block=1}
if(a[b].block){if(a[b].load==4)a[b].load=1;c=1;this.bq[b]=1;a[b].cb=function(){var d=this.uid||'41';utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};a[b].id=b;this.AS(a[b]);}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;utag.handler.RE('view',utag.data);utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1&&b.s2s!=1){if(utag.loader.bk[b.id]){this.f[b.id]=0;utag.loader.LOAD(b.id)
}else if(b.wait==1&&utag.loader.rf==0&&!(b.load==4&&utag.cfg.noview)){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{window.doCoreMetrixPort=function(origin,destination,resultsReturned){var core_attlist=core_attribute1+core_delim+core_attribute2;var pageID=pathSearchByOdADR;var searchTerm='Flight Status::Route::'+origin+'_'+destination;cxDataLayer={'page':{'page_id':pageID,'page_category':'','page_name':"Flight Status",'search':{'keyword':searchTerm,'results':resultsReturned},'brand':cm_site,'country':countryCode,"language":languageCode,"env":cxDataLayerEnv}};tmsCoremetricsPageViewTag(pageID,core_categoryID,searchTerm,resultsReturned,core_attlist);}}catch(e){utag.DB(e)};try{if(document.URL.indexOf('-newsletter-subscription.html')!==-1){window.doSuccessMS2=function(){console.log('doSuccessMS2');if(userProfile!=null){memberID=userProfile.membershipNumber;memberType=userProfile.currentTier;if(memberType!="AM"){memberType="MPO";}}else{memberID="";memberType="";}
var optAttributes='{"key":"memberID", "value":"'+memberID+'"},';optAttributes+='{"key":"memberType", "value":"'+memberType+'"}';callCISEventLog('CXPECIALS','513',locale,'',optAttributes);var submissionPath=currentNodePath+".member-thankyou.html?ruSubscribe=n";$.ajax({type:'POST',url:submissionPath,contentType:"application/json; charset=utf-8",success:(function(data){$("#enewsletter-signup-content").html(data);cmCreateConversionEventTag("CXpecials Un-subscription","2","CXpecials");})});window.scrollTo(0,0);}
window.doTagThankyou=function(){try{cmCreateConversionEventTag("CXpecials Subscription","2","CXpecials");}catch(e){console.log("coremetrics not implemented");}}}}catch(e){utag.DB(e)};try{if(((cxDataLayer.page.page_code=="FFPR"||cxDataLayer.page.page_code=="FFCO")&&cxDataLayer.page.language!="en")){$('span.lastSeat.Version-A-_-LSA-ON-_-w\\/seat-no').show()
$('span.lastSeat.Version-B-_-LSA-ON-_-wo\\/seat-no').hide()};}catch(e){utag.DB(e)};try{try{if(typeof(datalayer.itinerary)!="undefined"&&datalayer.page.page_code=="PURC"){var days_advance="> 2 weeks bookers";switch(datalayer.itinerary.days_advance){case 0:days_advance="Same day bookers";break;case 1:case 2:case 3:days_advance="Day 1-3 last minuate bookers";break;case 4:case 5:case 6:case 7:days_advance="Day 4-7 adhoc bookers ";break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:days_advance="2 weeks bookers";break;}
cxOptimizely.dimension('days advance',days_advance);};}catch(e){cxTagLogger(e);};}catch(e){utag.DB(e)};try{if(cxDataLayerEnv||"dev"){if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[132]=='undefined'){utag.runonce[132]=1;$(".flight-booking-panel #depart").bind('mousedown',function(e){utag.link({"element.element_id":"Search Panel::Book a trip::Depart","element.element_category":'Search Panel::Book a trip'})});}}}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[109]=='undefined'){utag.runonce[109]=1;jQuery('#change-region').bind('mousedown',function(e){utag.link({"element.element_id":"Change Region","element.element_category":"Header"});});}}catch(e){};}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[126]=='undefined'){utag.runonce[126]=1;$("a.mpo-trigger").bind('mousedown',function(e){if($(this).attr("aria-expanded")=="false"){status="Slide down"}else{status="Slide up"}
utag.link({"element.element_id":"MPO Sign-in::"+status,"element.element_category":"Header"});});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[108]=='undefined'){utag.runonce[108]=1;jQuery('.home-tabs > .tabs >  a').bind('mousedown',function(e){utag.link({"element.element_id":$(this).attr("data-tab-id"),"element.element_category":'Homepage::Search Panel'})});}}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[110]=='undefined'){utag.runonce[110]=1;setTimeout(function(){jQuery('select.destination-list').bind('change',function(e){utag.link({"element.element_id":"Fare Table::"+$(this).val(),"element.element_category":"Homepage::Fare Table"});})},1000);}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[112]=='undefined'){utag.runonce[112]=1;setTimeout(function(){$("a.expand-button").bind('mousedown',function(e){if($(this).parent().attr('aria-expanded')=="false"){type=$(this).parent().attr("data-item-category").toUpperCase();utag.link({"element.element_id":"Expand Icon::"+type,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});}});}(),2000)}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[116]=='undefined'){utag.runonce[116]=1;$("section.featured-locations > div > div > div.tabs > a").bind('mousedown',function(e){utag.link({"element.element_id":"Featured Location Tab","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[113]=='undefined'){utag.runonce[113]=1;$("input.ui-checkbox-input").bind('change',function(e){if(this.checked){utag.link({"element.element_id":"Inspire me Filter::"+$(this).attr('data-filter-id'),"element.element_category":"Explore Destination::Inspire me"});}});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[115]=='undefined'){utag.runonce[115]=1;$("a.explore-more").bind('mousedown',function(e){if(document.URL.indexOf('inspire-me.html')==-1){utag.link({"element.element_id":"See more::"+datalayer.page.meta.city,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city})}else{utag.link({"element.element_id":"See more guides","element.element_category":"Explore Destination::Inspire me"})}});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[118]=='undefined'){utag.runonce[118]=1;$("div.things-to-do > div.header > div > div > select").bind('change',function(e){var location=$(this).parent().children("span").children("span").html()
category=$(this).val().toUpperCase()||"ALL"
utag.link({"element.element_id":"Things to do::"+category,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[120]=='undefined'){utag.runonce[120]=1;$("div.header.parbase > div.navigation > ul > li").bind('mousedown',function(e){var element_id="Navigation Icon::";var link=$(this).find("a").first().attr("href")
if(link=="#"){element_id+=document.URL.split('/').pop().replace(/\.html/g,'').replace(/\./g,'-').replace(/#/g,"")}else{element_id+=link.split('/').pop().replace(/\.html/g,'').replace(/\./g,'-').replace(/#/g,"")}
utag.link({"element.element_id":element_id,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[122]=='undefined'){utag.runonce[122]=1;$("#destination-item-listing > a").bind('mousedown',function(e){city_name=$(this).attr("href").split(".")[1].toUpperCase();utag.link({"element.element_id":"Destination Picture:: "+city_name,"element.element_category":"Explore Destination::Inspire me"});});$("li.cities-group > a").bind('mousedown',function(e){city_name=$(this).attr("href").split(".")[1].toUpperCase();utag.link({"element.element_id":"Destination Name:: "+city_name,"element.element_category":"Explore Destination::Inspire me"});});$("div.guide-menu-tabs > div > a").bind('mousedown',function(e){tab_text=$(this).text();utag.link({"element.element_id":"Destination Guide Tab:: "+tab_text,"element.element_category":"Explore Destination::Inspire me"});});$('section.related-destinations > ul > li > a').bind('mousedown',function(e){utag.link({"element.element_id":"Destination Picture::"+$(this).attr("href").replace(/\.html/g,'').split(".").pop(),"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city})});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[124]=='undefined'){utag.runonce[124]=1;$("div.button-inspire > a").bind('mousedown',function(e){utag.link({"element.element_id":"Inspire me","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[128]=='undefined'){utag.runonce[128]=1;$(".flex-prev").bind('mousedown',function(e){utag.link({"element.element_id":"Image Navigation::Prev","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});$(".flex-next").bind('mousedown',function(e){utag.link({"element.element_id":"Image Navigation::Next","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){utag.DB(e)};try{if(document.URL.indexOf('/hidden-pages/event/popupngo-university-student-fares.html?')!==-1&&document.URL.indexOf('&destination=')!==-1){window.filter_destination=function(){$("#promotion-fare-table-details > tr").hide()
var destination=Arg('destination');if(destination=="SHA"){destination="SHA+"}
var selector="td > div > a.btn[onclick*='"+destination+"']";$(selector).parent().parent().parent().show();$(selector).parent().parent().find("a.btn").click();};setTimeout(filter_destination,1000);};}catch(e){utag.DB(e)};try{if(document.URL.indexOf("/latest-offers/subscribe-offers/newsletter-subscription.html")>-1||document.URL.indexOf("/latest-offers/subscribe-offers/ka-specials-newsletter-subscription.html")>-1){$("select#title").prepend(new Option('Please select...','',true,true));$("select#title option:first").attr("selected","selected");}}catch(e){utag.DB(e)};try{if(cxDataLayer.page.page_type=="fanfares"){$("#cxholidays").remove();};}catch(e){utag.DB(e)};try{if(cxDataLayer.page.env!=='prod'){if((datalayer.page.page_code="PURC"||datalayer.page.page_code=="CONF")){window.insertInsuranceCaption=function(msg){$('<span style="display:block;" id="insurance_caption"><p>'+msg+'</p></span>').insertAfter($(".price-amount.redFont.clear").last())};window.removeInsuranceCaption=function(msg){$('#insurance_caption').remove();};var msg;switch(cxDataLayer.page.country){case"HK":if(cxDataLayer.page.language=='en'){msg="Travel insurance premium is charged separately and will be collected by QBE Hong Kong & Shanghai Insurance Ltd.";}else{msg="旅遊保險收費將經由昆士蘭聯保保險有限公司收取。";};break;case"AU":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (Australia) Limited ABN 78 0003 191 035 ";break;case"GB":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (Europe) Limited";break;case"SG":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (International) Limited - Singapore Branch";break;};};};if(datalayer.page.page_code="PURC"){$('.greenCheck').click(function(){checked=$('input[name="INSCHECKHCI"]').is(":checked")
if(checked){insertInsuranceCaption(msg);}else{removeInsuranceCaption(msg);}});};if(datalayer.page.page_code=="CONF"&&($(cxDataLayer.products).last().attr("type")=="insurance")){insertInsuranceCaption(msg);};}catch(e){utag.DB(e)};try{setTimeout(function(){if(cxDataLayer.page.page_code=="CONF"){$("div.olUp").remove()};},2000)}catch(e){utag.DB(e)};try{if(datalayer.page.page_id=="IBE::Revenue::Revenue_BOH::Payment"){$("input[name^='INS2'][value^='FALSE']").prop("checked",true);$("#InsTitle").parent().hide();};}catch(e){utag.DB(e)};try{try{if($('#cross-sell-banner > a').length>0){$('#cross-sell-banner > a').attr('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-TOPBANNER")
cmCreateManualImpressionTag(cxDataLayer.page.country+"-_-AML-_-XSELL-TOPBANNER");}}catch(e){};try{if($('#hotelsList > div.hotel-item > div.hotel-content > div.button > a').length>0){for(var i=0;i<$('#hotelsList > div.hotel-item > div.hotel-content').length;i++){var hotel_link=$('#hotelsList > div.hotel-item > div.hotel-content > div.button > a')[i];var hotel_name=$('#hotelsList > div.hotel-item > div.hotel-content > div.hotel-name-container > h3.hotel-name')[i].textContent.replace(/[^a-zA-Z0-9]/g,'_');var manual_cm_sp=cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-HOTEL-"+hotel_name;console.log(i+'/'+$('#hotelsList > div.hotel-item > div.hotel-content').length+'='+manual_cm_sp);hotel_link.setAttribute('manual_cm_sp',manual_cm_sp);cmCreateManualImpressionTag(manual_cm_sp);}}}catch(e){console(e.msg)};try{if($('#carsList > div.car-item > div.car-content > div.button > a').length>0){for(var i=0;i<$('#carsList > div.car-item > div.car-content').length;i++){var car_link=$('#carsList > div.car-item > div.car-content > div.button > a')[i];var car_name=$('#carsList > div.car-item > div.car-content > h3.car-name')[i].textContent.replace(/[^a-zA-Z0-9]/g,'_');car_link.setAttribute("manual_cm_sp",cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-CAR-"+car_name);cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-CAR-"+car_name);}}}catch(e){console(e.msg)};try{if($('#carListContainer > div.more-hotels > div > a').length>0){var see_more_btn=$('div.more-hotels > div > a')[0];see_more_btn.setAttribute('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-HOTEL-SEE_MORE_BTN");cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-HOTEL-SEE_MORE_BTN");see_more_btn=$('div.more-hotels > div > a')[1];see_more_btn.setAttribute('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-CAR-SEE_MORE_BTN");cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-CAR-SEE_MORE_BTN");}}catch(e){console(e.msg)};}catch(e){utag.DB(e)};try{if(document.URL.indexOf("/cx/en_US.html")!=-1||document.URL.indexOf("/cx/en_CA.html")!=-1||document.URL.indexOf("/cx/en_GB.html")!=-1){window.jQuery(document).ajaxComplete(function(event,xhr,settings){if(xhr.responseText.indexOf('primaryPromotions')!=-1){cxOptimizely.activate(3251090104)}});}}catch(e){utag.DB(e)};try{try{if(cxDataLayer.page.page_code=="ALPI"){if(Object.keys(cxDataLayer.member).length==0){if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[190]=='undefined'){utag.runonce[190]=1;$(":button").bind('click',function(e){email=document.getElementsByName("CONTACT_POINT_EMAIL_1")[0].value
if(email)utag.link({"registration.email":email,"registration.type":"GU"})});}}};}catch(e){};}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.DB('READY:utag.cfg.readywait');utag.loader.PINIT();}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.76 ut4.0.201508270936, Copyright 2015 Tealium.com Inc. All Rights Reserved.
window.GoogleAnalyticsObject="";if(window.GoogleAnalyticsObject==""){window.GoogleAnalyticsObject="ga"};window[window.GoogleAnalyticsObject]=window[window.GoogleAnalyticsObject]||function(){(window[window.GoogleAnalyticsObject].q=window[window.GoogleAnalyticsObject].q||[]).push(arguments);};try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState==='complete'||this.readyState==='loaded')&&!b.hFlag){b.hFlag=1;o.cb();}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb();}};}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.o=window[window.GoogleAnalyticsObject];u.created=false;u.all=function(e,o,v,a,b){for(var i=0;i<u.data.account.length;i++){var t=(u.data.name[i]?u.data.name[i]+".":"");if(o==="event"){u.o(t+e,o,v,a,b)}else if(v){u.o(t+e,o,v)}else{u.o(t+e,o);}}}
u.map={"config.ga.tracker_id":"account","page.page_id_slashified":"page","dom.url":"location","dom.title":"title","page.country":"pageview-dimension1","page.language":"pageview-dimension2","page.locale":"pageview-dimension3","indicator.pax_indicator":"dimension15","utm.medium":"campaignMedium","utm.content":"campaignContent","utm.source":"campaignSource","utm.campaign":"campaignName","utm.term":"campaignKeyword"};u.extend=[function(a,b){try{if(datalayer.page.page_id=='TRP::PACKAGE::CONFIRMATION'||datalayer.page.page_id=='TRP::HOTEL::CONFIRMATION'){utag_data["transaction.total"]=document.getElementById("totalPayment").innerHTML.replace(/[^0-9\.]+/g,"");var pnr_super=document.getElementById("booking-reference").innerHTML.split("&nbsp;").pop();var pnr=document.getElementsByTagName("h2")[0].innerHTML.split(" - ").pop().substr(0,6);utag_data["transaction.pnr"]=[pnr_super,pnr].join("|");var subtotal=tealiumiq_currency.convert(utag_data["transaction.total"],cxDataLayer.page.currency,"HKD");cxOptimizely.revenue("TRP::"+utag_data["transaction.pnr"],subtotal)};}catch(e){cxTagLogger(e);};}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){u.o=window[window.GoogleAnalyticsObject];b.ga_events=b.ga_events||[];u.addEvent=function(v){if(typeof v.eventCategory=="undefined"||typeof v.eventAction=="undefined"){utag.DB("GA event Category or Action is not set");return;}
if(v.eventValue&&isNaN(parseInt(v.eventValue))){utag.DB("GA event Value is not a number");v.eventValue=null;}else{v.eventValue=parseInt(v.eventValue)||null;}
b.ga_events.push(v);}
var c,d,e,f,g;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"","a":a,"cookieDomain":""||utag.loader.lh(),"name":"","account":"UA-54513972-1","anonymizeIp":("false"==="true"?true:false),"allowLinker":false,"crossDomainTrack":"","enhancedLinkAttribution":"true","enhancedecommerce":"false","displayfeatures":"true","screenView":"false","enh_action":"","enh_event_cb":"","enh_checkout_step":"","enh_checkout_option":"","product_id":[],"product_name":[],"product_category":[],"product_brand":[],"product_unit_price":[],"product_quantity":[],"product_discount":[],"product_action_list":"","enh_impression_id":[],"enh_impression_name":[],"enh_impression_price":[],"enh_impression_category":[],"enh_impression_brand":[],"enh_impression_list":[],"enh_impression_position":[],"enh_promo_id":[],"enh_promo_name":[],"enh_promo_creative":[],"enh_promo_position":[],"id":"","order_id":"","order_total":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"product_discount":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("ec_add.")===0){u.data.ec_add.push([[e[f].substr(7)],b[d]]);}else{u.data[e[f]]=b[d];}}}}
u.data.order_id=u.data.order_id||b._corder;u.data.order_total=u.data.order_total||b._ctotal;u.data.order_shipping=u.data.order_shipping||b._cship;u.data.order_tax=u.data.order_tax||b._ctax;u.data.order_store=u.data.order_store||b._cstore;u.data.order_currency=u.data.order_currency||b._ccurrency;u.data.order_coupon_code=u.data.order_coupon_code||b._cpromo;if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_brand.length===0&&b._cbrand!==undefined){u.data.product_brand=b._cbrand.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(u.data.product_discount.length===0&&b._cpdisc!==undefined){u.data.product_discount=b._cpdisc.slice(0);}
if(typeof u.data.account==="string"){u.data.account=u.data.account.replace(/\s/g,"").split(",")};if(typeof u.data.name==="string"){u.data.name=u.data.name.replace(/\s/g,"").split(",")};if(u.created===false){u.created=true;for(f=0;f<u.data.account.length;f++){c=new Object();if(u.data.siteSpeedSampleRate){c.siteSpeedSampleRate=parseInt(u.data.siteSpeedSampleRate)};c.cookieDomain=u.data.cookieDomain;if(u.data.cookieExpires||u.data.cookieExpires==="0"){c.cookieExpires=parseInt(u.data.cookieExpires)};if(u.data.legacyCookieDomain){c.legacyCookieDomain=u.data.legacyCookieDomain};c.allowLinker=u.data.allowLinker;if(typeof u.data.name[f]!=="undefined"&&u.data.name[f]!==""){c.name=u.data.name[f]};u.o("create",u.data.account[f],c);}}
if(u.data.allowLinker===true&&u.data.crossDomainTrack!==undefined&&typeof u.data.crossDomainTrack==="string"){u.all("require","linker");u.data.crossDomainTrack=u.data.crossDomainTrack.split(",");u.all("linker:autoLink",u.data.crossDomainTrack);};if(u.data.anonymizeIp){u.all("set",'anonymizeIp',true)};if(u.data.uid){u.all("set","&uid",u.data.uid)};if(u.data.page){u.all("set","page",u.data.page)};if(u.data.title){u.all("set","title",u.data.title)};if(u.data.location){u.all("set","location",u.data.location)};if(u.data.nonInteraction){u.all("set","nonInteraction",true)};if(u.data.campaignName){u.all("set","campaignName",u.data.campaignName)};if(u.data.campaignSource){u.all("set","campaignSource",u.data.campaignSource)};if(u.data.campaignMedium){u.all("set","campaignMedium",u.data.campaignMedium)};if(u.data.campaignContent){u.all("set","campaignContent",u.data.campaignContent)};if(u.data.campaignKeyword){u.all("set","campaignKeyword",u.data.campaignKeyword)};if(u.data.displayfeatures==="true"||u.data.displayfeatures===true){u.all("require","displayfeatures");}
for(d in utag.loader.GV(u.data)){if(d.indexOf("metric")==0||d.indexOf("dimension")==0||d.indexOf("contentGroup")==0){u.all("set",d,u.data[d]);}}
u.data.transaction_events={};u.data.pageview_events={};u.data.link_events={};for(d in utag.loader.GV(u.data)){if(d.indexOf("-")>-1&&(d.indexOf("metric")>-1||d.indexOf("dimension")>-1||d.indexOf("contentGroup")>-1)){if(d.indexOf("transaction-")===0){u.data.transaction_events[d]=u.data[d];}else if(d.indexOf("pageview-")===0){u.data.pageview_events[d]=u.data[d];}else if(d.indexOf("link-")===0){u.data.link_events[d]=u.data[d];}}else if(d.indexOf("metric")===0||d.indexOf("dimension")===0||d.indexOf("contentGroup")===0){u.all("set",d,u.data[d]);}}
if(u.data.enhancedLinkAttribution==="true"){u.all("require","linkid","linkid.js");}
u.data.order_id=(u.data.order_id?u.data.order_id:u.data.id);if(u.data.enhancedecommerce==="true"){u.all("require","ec");u.all("set",'&cu',(u.data.currency?u.data.currency:u.data.order_currency));if(u.data.enh_action==="product_click"&&u.data.a==="link"){g={};g.id=u.data.product_id[0];g.name=(u.data.product_name[0]?u.data.product_name[0]:u.data.product_id[0]);g.brand=(u.data.product_brand[0]?u.data.product_brand[0]:"");g.category=(u.data.product_category[0]?u.data.product_category[0]:"");g.price=(u.data.product_unit_price[0]?u.data.product_unit_price[0]:"1.00");g.quantity=(u.data.product_quantity[0]?u.data.product_quantity[0]:"1");u.all("ec:addProduct",g);ga('ec:setAction','click',{list:u.data.product_action_list});u.all('send','event','UX','click','Results',{'hitCallback':window[u.data.enh_event_cb]});}else if(u.data.enh_action==="detail"){g={};g.id=u.data.product_id[0];g.name=(u.data.product_name[0]?u.data.product_name[0]:u.data.product_id[0]);g.brand=(u.data.product_brand[0]?u.data.product_brand[0]:"");g.category=(u.data.product_category[0]?u.data.product_category[0]:"");g.price=(u.data.product_unit_price[0]?u.data.product_unit_price[0]:"1.00");g.quantity=(u.data.product_quantity[0]?u.data.product_quantity[0]:"1");u.all('ec:addProduct',g);u.all("ec:setAction","detail");}else if(u.data.enh_action==="promo_click"&&u.data.a==="link"){g={};g.id=u.data.enh_promo_id[0];g.name=u.data.enh_promo_name[0];g.creative=u.data.enh_promo_creative[0];g.position=u.data.enh_promo_position[0];u.all('ec:addPromo',g);u.all('ec:setAction',u.data.enh_action);u.all('send','event','Internal Promotions','click',(g.name?g.name:g.id));}else if(u.data.enh_action==="add"){for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.brand=(u.data.product_brand[f]?u.data.product_brand[f]:"");g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.all('ec:addProduct',g);}
u.all('ec:setAction','add');if(u.data.a==="link"){u.all('send','event','UX','click','add to cart');}}else if(u.data.enh_action==="remove"){for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.brand=(u.data.product_brand[f]?u.data.product_brand[f]:"");g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.all('ec:addProduct',g);}
u.all('ec:setAction','remove');if(u.data.a==="link"){u.all('send','event','UX','click','remove from cart');}}else if(u.data.enh_action==="checkout"){for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.brand=(u.data.product_brand[f]?u.data.product_brand[f]:"");g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.all('ec:addProduct',g);}
g={};g.step=u.data.enh_checkout_step||"1";g.option=u.data.enh_checkout_option;u.all('ec:setAction',u.data.enh_action,g);}else if(u.data.order_id&&u.data.enh_action==="refund"){if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.data.order_id=u.data.order_id[0];}
for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.all('ec:addProduct',g);}
g={};g.id=u.data.order_id;u.all('ec:setAction','refund',g);}else if(u.data.order_id){if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.data.order_id=u.data.order_id[0];}
for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.brand=(u.data.product_brand[f]?u.data.product_brand[f]:"");g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");g.coupon=(u.data.product_discount.length[f]?u.data.product_discount.length[f]:"");u.all('ec:addProduct',g);}
g={};g.id=u.data.order_id;g.affiliation=(u.data.affiliation?u.data.affiliation:u.data.order_store);g.revenue=(u.data.revenue?u.data.revenue:u.data.order_total);g.shipping=(u.data.shipping?u.data.shipping:u.data.order_shipping);g.tax=(u.data.tax?u.data.tax:u.data.order_tax);g.coupon=(u.data.coupon?u.data.coupon:u.data.order_coupon_code);u.all('ec:setAction','purchase',g);}
if(u.data.enh_action==="checkout_option"&&u.data.a==="link"){g={};g.step=u.data.enh_checkout_step||"1";g.option=u.data.enh_checkout_option;u.all('ec:setAction',u.data.enh_action,g);u.all('send','event','Checkout','Option',{'hitCallback':window[u.data.enh_event_cb]});}
if(u.data.enh_impression_id){for(f=0;f<u.data.enh_impression_id.length;f++){g={};g.id=u.data.enh_impression_id[f];g.name=(u.data.enh_impression_name[f]?u.data.enh_impression_name[f]:u.data.enh_impression_id[f]);g.brand=(u.data.enh_impression_brand[f]?u.data.enh_impression_brand[f]:"");g.category=(u.data.enh_impression_category[f]?u.data.enh_impression_category[f]:"");g.list=(u.data.enh_impression_list[f]?u.data.enh_impression_list[f]:"");g.price=(u.data.enh_impression_price[f]?u.data.enh_impression_price[f]:"");g.position=(u.data.enh_impression_position[f]?u.data.enh_impression_position[f]:"");u.all('ec:addImpression',g);}}
if(u.data.enh_promo_id&&u.data.a==="view"){for(f=0;f<u.data.enh_promo_id.length;f++){g={};g.id=u.data.enh_promo_id[f];g.name=(u.data.enh_promo_name[f]?u.data.enh_promo_name[f]:u.data.enh_promo_id[f]);g.creative=(u.data.enh_promo_creative[f]?u.data.enh_promo_creative[f]:"");g.position=(u.data.enh_promo_position[f]?u.data.enh_promo_position[f]:"");u.all('ec:addPromo',g);}}
if(u.data.a==="view"){g={};if(u.data.order_id){for(d in utag.loader.GV(u.data.transaction_events)){g[d.split("-")[1]]=u.data.transaction_events[d];}}
for(d in utag.loader.GV(u.data.pageview_events)){g[d.split("-")[1]]=u.data.pageview_events[d];}
g.hitType="pageview";u.all("send",g);}}else if(u.data.a==="view"){g={};for(d in utag.loader.GV(u.data.pageview_events)){g[d.split("-")[1]]=u.data.pageview_events[d];}
g.hitType="pageview";u.all("send",g);if(u.data.order_id&&!(u.data.order_id instanceof Array)){u.all("require","ecommerce","ecommerce.js");g={};for(d in utag.loader.GV(u.data.transaction_events)){g[d.split("-")[1]]=u.data.transaction_events[d];}
g.id=u.data.order_id;g.affiliation=(u.data.affiliation?u.data.affiliation:u.data.order_store);g.revenue=(u.data.revenue?u.data.revenue:u.data.order_total);g.shipping=(u.data.shipping?u.data.shipping:u.data.order_shipping);g.tax=(u.data.tax?u.data.tax:u.data.order_tax);g.currency=(u.data.currency?u.data.currency:u.data.order_currency);u.all('ecommerce:addTransaction',g);for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.order_id;g.sku=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.all('ecommerce:addItem',g);}
u.all('ecommerce:send');}else if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.all("require","ecommerce","ecommerce.js");var lastindex=0;for(f=0;f<u.data.order_id.length;f++){if(f===u.data.order_id.length-1||(u.data.order_id[f]!==u.data.order_id[f+1])){g={};for(d in utag.loader.GV(u.data.transaction_events)){g[d.split("-")[1]]=u.data.transaction_events[d];}
g.id=u.data.order_id[f];g.affiliation=(u.data.affiliation&&typeof u.data.affiliation[f]!=="undefined"?u.data.affiliation[f]:u.data.order_store);g.revenue=(u.data.revenue&&typeof u.data.revenue[f]!=="undefined"?u.data.revenue[f]:u.data.order_total);g.shipping=(u.data.shipping&&typeof u.data.shipping[f]!=="undefined"?u.data.shipping[f]:u.data.order_shipping);g.tax=(u.data.tax&&typeof u.data.tax[f]!=="undefined"?u.data.tax[f]:u.data.order_tax);g.currency=(u.data.currency?u.data.currency:u.data.order_currency);u.all('ecommerce:addTransaction',g);for(e=lastindex;e<f+1;e++){g={};g.id=u.data.order_id[f];g.sku=u.data.product_id[e];g.name=(u.data.product_name[e]?u.data.product_name[e]:u.data.product_id[e]);g.category=(u.data.product_category[e]?u.data.product_category[e]:"");g.price=(u.data.product_unit_price[e]?u.data.product_unit_price[e]:"1.00");g.quantity=(u.data.product_quantity[e]?u.data.product_quantity[e]:"1");u.all('ecommerce:addItem',g);}
lastindex=f+1;}}
u.all('ecommerce:send');}}
if(u.data.eventCategory&&u.data.eventAction){g={};for(d in utag.loader.GV(u.data.link_events)){g[d.split("-")[1]]=u.data.link_events[d];}
g.hitType="event";g.eventCategory=u.data.eventCategory;g.eventAction=u.data.eventAction;if(u.data.eventLabel){g.eventLabel=u.data.eventLabel};if(typeof u.data.eventValue!=="undefined"&&u.data.eventValue!==""){g.eventValue=u.data.eventValue;}
u.all("send",g);u.data.eventCategory=u.data.eventAction=u.data.eventLabel=u.data.eventValue="";}
for(e=0;e<b.ga_events.length;e++){g={};for(d in utag.loader.GV(u.data.link_events)){g[d.split("-")[1]]=u.data.link_events[d];}
g.hitType="event";g.eventCategory=b.ga_events[e].eventCategory;g.eventAction=b.ga_events[e].eventAction;g.eventLabel=b.ga_events[e].eventLabel;g.eventValue=b.ga_events[e].eventValue;u.all("send",g);}
if(u.data.socialNetwork&&u.data.socialAction&&u.data.socialTarget){g={};g.hitType="social";g.socialNetwork=u.data.socialNetwork;g.socialAction=u.data.socialAction;g.socialTarget=u.data.socialTarget;u.all("send",g);u.data.socialNetwork=u.data.socialAction=u.data.socialTarget="";}
if(u.data.timingCategory&&u.data.timingVar&&u.data.timingValue){g={};g.hitType="timing";g.timingCategory=u.data.timingCategory;g.timingVar=u.data.timingVar;g.timingValue=u.data.timingValue;g.timingLabel=u.data.timingLabel||"";u.all("send",g);}
if(u.data.screenView==="true"||u.data.screenView===true){g={};g.hitType="screenview";g.appName=u.data.appName||"";g.appId=u.data.appId||"";g.appVersion=u.data.appVersion||"";g.appInstallerId=u.data.appInstallerId||"";g.screenName=u.data.screenName||"";u.all("send",g);}
if(u.data["ga-disable"]){window["ga-disable-"+u.data["ga-disable"]]=true};(function(){var id='tealium-tag-7110';if(document.getElementById(id)){return;}
u.o.l=1*new Date();var e=document.createElement('script');e.async=true;e.id=id;e.src='//www.google-analytics.com/analytics.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(e,s);})();}};utag.o[loader].loader.LOAD(id);}('76','cathaypacific.main'));}catch(error){utag.DB(error);}

//tealium universal tag - utag.84 ut4.0.201508270936, Copyright 2015 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState==='complete'||this.readyState==='loaded')&&!b.hFlag){b.hFlag=1;o.cb();}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb();}};}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.event_lookup={"pageview":"1","registration":"2","order":"3","purchase":"3","shopaction9":"3","cart":"4","shopaction5":"4","productview":"5","prodview":"5","conversionevent":"14","conversion":"14","element":"15"};u.concat_attr=function(a,e,c,d,f,g){g="";for(f=1;f<=c;f++){if(typeof d!="undefined"&&u.data[e+a+f+""]instanceof Array){g+=((typeof u.data[e+a+f+""][d]!="undefined")?u.data[e+a+f+""][d]:"")+"-_-"}else{g+=((typeof u.data[e+a+f+""]!="undefined")?u.data[e+a+f+""]:"")+"-_-"}}
return g};u.map={"config.coremetrics.client_id":"ClientID","config.coremetrics.cookie_domain":"CookieDomain","config.coremetrics.datacollection_domain":"DataCollectionDomain","page.page_id":"PageviewTag_pi,ElementTag_e_a5,RegistrationTag_rg5","page.page_category":"PageviewTag_cg","page.country":"PageviewTag_pv_a2,ProductviewTag_pr_a2,ShopAction5Tag_s_a2,ShopAction9Tag_s_a2,ElementTag_e_a1,OrderTag_o_a2","page.language":"PageviewTag_pv_a3,ShopAction5Tag_s_a33,ShopAction9Tag_s_a33,ProductviewTag_pr_a33,OrderTag_o_a33","page.error_code":"PageviewTag_pv_a6","page.sub_error_code":"PageviewTag_pv_a7","page.timestamp":"PageviewTag_pv_a8,OrderTag_o_a32,ShopAction5Tag_s_a32,ShopAction9Tag_s_a32,ConversionEventTag_c_a19","transaction.pnr":"PageviewTag_pv_a9,ConversionEventTag_c_a8","page.system.params.stream":"PageviewTag_pv_a12","itinerary.origin_airport":"PageviewTag_pv_a13,OrderTag_o_a26,ShopAction5Tag_s_a26,ShopAction9Tag_s_a26","itinerary.destination_airport":"PageviewTag_pv_a14,OrderTag_o_a27,ShopAction5Tag_s_a27,ShopAction9Tag_s_a27","itinerary.route":"ShopAction5Tag_s_a3,ShopAction9Tag_s_a3,OrderTag_o_a3,ConversionEventTag_c_a2","itinerary.flights":"PageviewTag_pv_a16,ShopAction5Tag_s_a4,ShopAction9Tag_s_a4,OrderTag_o_a4,ConversionEventTag_c_a3","itinerary.carriers":"PageviewTag_pv_a17","page.system.params.date_depart_and_date_return":"PageviewTag_pv_a18","itinerary.trip_type":"PageviewTag_pv_a19","itinerary.cabins":"PageviewTag_pv_a20,ShopAction5Tag_s_a6,ShopAction9Tag_s_a6,OrderTag_o_a6,ConversionEventTag_c_a6","itinerary.rbds":"PageviewTag_pv_a21,ShopAction5Tag_s_a7,ShopAction9Tag_s_a7,OrderTag_o_a7,ConversionEventTag_c_a7","itinerary.pax_count":"PageviewTag_pv_a22,ShopAction5Tag_s_a11,ShopAction9Tag_s_a11,OrderTag_o_a11","member.tier":"PageviewTag_pv_a23,,RegistrationTag_rg1,ConversionEventTag_c_a5","transaction.payment.method":"PageviewTag_pv_a24,ShopAction5Tag_s_a16,ShopAction9Tag_s_a16,OrderTag_o_a16","transaction.payment.currency":"PageviewTag_pv_a25","transaction.payment.subtotal":"PageviewTag_pv_a26,OrderTag_tr,ShopAction9Tag_tr","page.system.params.office_id":"PageviewTag_pv_a28,ShopAction5Tag_s_a8,ShopAction9Tag_s_a8,OrderTag_o_a8","page.page_code":"PageviewTag_pv_a29","page.system.params.sitecode":"ShopAction5Tag_s_a9,ShopAction9Tag_s_a9,OrderTag_o_a9","indicator.upsell_tracking":"ShopAction5Tag_s_a13,ShopAction9Tag_s_a13,OrderTag_o_a13,ConversionEventTag_c_a16","indicator.upsell_revenue":"ShopAction5Tag_s_a14,ShopAction9Tag_s_a14,OrderTag_o_a14,ConversionEventTag_c_a17","page.system.params.flow":"ShopAction5Tag_s_a18,ShopAction9Tag_s_a18,OrderTag_o_a18,ConversionEventTag_c_a13,PageviewTag_pv_a11","page.system.promotion.promo_code":"ShopAction5Tag_s_a20,ShopAction9Tag_s_a20,OrderTag_o_a20,ConversionEventTag_c_a14","transaction.payment.fxmp.total_with_currency":"ShopAction9Tag_s_a21,OrderTag_o_a21","member.title":"RegistrationTag_rg1","member.membership_no":"RegistrationTag_cd,RegistrationTag_rg2","itinerary.origin_city":"ShopAction5Tag_s_a28,ShopAction9Tag_s_a28,OrderTag_o_a28","itinerary.destination_city":"ShopAction5Tag_s_a29,ShopAction9Tag_s_a29,OrderTag_o_a29","itinerary.origin_country":"ShopAction5Tag_s_a30,ShopAction9Tag_s_a30,OrderTag_o_a30","itinerary.destination_country":"ShopAction5Tag_s_a31,ShopAction9Tag_s_a31,OrderTag_o_a31","transaction.order_id":"ShopAction5Tag_s_a49,ShopAction9Tag_s_a49,PageviewTag_pv_a31,OrderTag_on,ShopAction9Tag_on","transaction.payment.total_with_currency":"PageviewTag_pv_a30,ShopAction5Tag_s_a25,ShopAction9Tag_s_a25,OrderTag_o_a25","js_page.cxDataLayer.error":"PageviewTag_pv_a50","itinerary.month_depart":"ShopAction5Tag_s_a34,ShopAction9Tag_s_a34,OrderTag_o_a34","itinerary.days_advance":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35,OrderTag_o_a35","transaction.ffp.points":"ShopAction5Tag_s_a12,ShopAction9Tag_s_a12,OrderTag_o_a12","page.system.promotion.fare_id":"ShopAction5Tag_s_a19,ShopAction9Tag_s_a19,OrderTag_o_a19","transaction.payment.subtotal_with_currency":"ShopAction5Tag_s_a10,ShopAction9Tag_s_a10,OrderTag_o_a10,ConversionEventTag_c_a11","itinerary.days_duration":"ShopAction5Tag_s_a36,ShopAction9Tag_s_a36,OrderTag_o_a36","itinerary.dates_depart":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35,OrderTag_o_a5,ConversionEventTag_c_a4","indicator.atc_indicator":"OrderTag_o_a22","cp.cm_mmc":"OrderTag_o_a37","page.search_keyword":"PageviewTag_se","page.search_results":"PageviewTag_sr","page.error_page_id":"PageviewTag_pv_a5","indicator.pax_indicator":"ShopAction5Tag_s_a41,ShopAction9Tag_s_a41,OrderTag_o_a41,ProductviewTag_pr_a41,ConversionEventTag_c_a12","page.system.params.route":"PageviewTag_pv_a15","page.system.params.jsession_id":"PageviewTag_pv_a50","indicator.pnr_with_departure_date":"ShopAction9Tag_s_a42,OrderTag_o_a42","page.timestamp_local":"PageviewTag_pv_a49,OrderTag_o_a49","transaction.hold_till":"ConversionEventTag_c_a18","transaction.payment.surcharge_and_tax_with_currency":"ConversionEventTag_c_a10","page.locale":"PageviewTag_pv_a27,ShopAction5Tag_s_a43,ShopAction9Tag_s_a43,OrderTag_o_a43,ProductviewTag_pr_a43,ConversionEventTag_c_a9","indicator.lsa_indicator":"ShopAction5Tag_s_a44,ShopAction9Tag_s_a44,OrderTag_o_a44","js_page.cxDataLayer.cart.pnr":"PageviewTag_pv_a31","cp.TRACKER_CX":"PageviewTag_pv_a1,ProductviewTag_pr_a1,ShopAction5Tag_s_a1,ShopAction9Tag_s_a1,OrderTag_o_a1","cp.TRACKER_KA":"PageviewTag_pv_a1,ProductviewTag_pr_a1,ShopAction5Tag_s_a1,ShopAction9Tag_s_a1,OrderTag_o_a1","va.badges.5122":"PageviewTag_pv_a46","page.meta.city":"PageviewTag_pv_a32","collection.product.prices":"ShopAction5Tag_bp,ShopAction9Tag_bp","collection.product.product_ids":"ProductviewTag_pr,ShopAction5Tag_pr,ShopAction9Tag_pr","collection.product.product_names":"ProductviewTag_pm,ShopAction5Tag_pm,ShopAction9Tag_pm","collection.product.product_categories":"ProductviewTag_cg,ShopAction5Tag_cg,ShopAction9Tag_cg","collection.product.qtys":"ShopAction5Tag_qt,ShopAction9Tag_qt","event.event_id":"ConversionEventTag_cid","event.action_type":"ConversionEventTag_cat","event.event_category":"ConversionEventTag_ccid","event.event_points":"ConversionEventTag_cpt","element.element_category":"ElementTag_ecat","element.element_id":"ElementTag_eid","page.page_event:registration":"Registration","page.page_event:order":"Order","page.page_event:product_view":"Productview","page.page_event:cart":"ShopAction5","page.page_event:booking_on_hold":"Conversion","page.page_event:purchase":"Order","transaction.payment.surcharge_and_tax":"OrderTag_sg","member.member_id":"ShopAction9Tag_cd,OrderTag_cd,,RegistrationTag_cd","collection.product.ffcodes":"ShopAction5Tag_s_a40,ShopAction9Tag_s_a40","collection.product.price_with_currency":"ShopAction5Tag_s_a38,ShopAction9Tag_s_a38","collection.product.tax_and_surcharge_with_currency":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35","member.email":"RegistrationTag_em","va.metrics.5325":"OrderTag_o_a48","js_page.cxDataLayer.trp.tax":"PageviewTag_pv_a46","js_page.cxDataLayer.trp.subtotal":"PageviewTag_pv_a47","js_page.cxDataLayer.trp.total":"PageviewTag_pv_a48"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,g;u.data={"qsp_delim":"&","kvp_delim":"=","a":a,"base_url":"//assets.cathaypacific.com/libs/analytics/coremetrics/latest/eluminate.js"||"//libs.coremetrics.com/eluminate.js","ClientID":"","TestClientID":"","DataCollectionMethod":true,"DataCollectionDomain":"","CookieDomain":"","test_domains":",,","tid":{},"test":false,"pv_a":"","pv":"","s_a":"","sx":"","o_a":"","or":"","rg":"","pr_a":"","c_a":"","cx":"","e_a":"","order_id":"","order_subtotal":"","order_shipping":"","order_currency":"","customer_id":"","customer_city":"","customer_state":"","customer_zip":"","customer_country":"","product_id":[],"product_name":[],"product_category":[],"product_quantity":[],"product_unit_price":[]};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f]==="tid"){g=u.event_lookup[(""+b[d]).toLowerCase().replace("_","")]+"";if(g!==""){u.data.tid[g]=true;}else{u.data.tid[b[d]]=true;}}else{u.data[e[f]]=b[d];}}}else{c=d.split(":");if(c.length===2&&b[c[0]]===c[1]){g=""+u.event_lookup[u.map[d].toLowerCase().replace("_","")];if(g!==""){u.data.tid[g]=true}}}}
u.data.order_id=u.data.order_id||b._corder;u.data.order_subtotal=u.data.order_subtotal||b._csubtotal;u.data.order_shipping=u.data.order_shipping||b._cship;u.data.order_currency=u.data.order_currency||b._ccurrency||datalayer.page.currency;u.data.customer_id=u.data.customer_id||b._ccustid;u.data.customer_city=u.data.customer_city||b._ccity;u.data.customer_state=u.data.customer_state||b._cstate;u.data.customer_zip=u.data.customer_zip||b._czip;u.data.customer_country=u.data.customer_country||b._ccountry;if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.loader_cb=function(){if(!u.initialized){u.initialized=true;if(u.data.test_domains.indexOf(","+location.hostname+',')>-1){u.data.test=true;}
if(u.data.test){u.data.ClientID=u.data.TestClientID;u.data.DataCollectionMethod=u.data.TestDataCollectionMethod||false;u.data.DataCollectionDomain=u.data.TestDataCollectionDomain||"testdata.coremetrics.com";}
cmSetClientID(u.data.ClientID,u.data.DataCollectionMethod,u.data.DataCollectionDomain,u.data.CookieDomain);cxTagLogger("Client ID - "+u.data.ClientID);cxTagLogger("Data Collection Domain - "+u.data.DataCollectionDomain);cxTagLogger("Cookie Domain - "+u.data.CookieDomain);}
if(u.data.a==="view"){e="PageviewTag_";u.data.pv_a=u.concat_attr("pv_a",e,50);u.data.pv=u.concat_attr("pv",e,15);if(u.data["ManualPageviewTag_ul"]){f="ManualPageviewTag_";cmCreateManualPageviewTag(u.data[e+"pi"],u.data[e+"cg"],u.data[f+"ul"],u.data[f+"rf"],u.data.pv_a,u.data[e+"se"],u.data[e+"sr"],u.data.pv);}else{cmCreatePageviewTag(u.data[e+"pi"],u.data[e+"cg"],u.data[e+"se"],u.data[e+"sr"],u.data.pv_a,u.data.pv);cxTagLogger('Pageview Tag - Page ID - '+u.data[e+"pi"]);cxTagLogger('Pageview Tag - Page Category - '+u.data[e+"cg"]);if(typeof datalayer.page.error_code!="undefined"&&datalayer.page.error_code.length!=0&&datalayer.page.error_code.indexOf('WARNING')==-1){error_codes=datalayer.page.error_code.split('|');for(i=0;i<error_codes.length;i++){error_code_split=error_codes[i].split('::');error_type=[error_code_split[0],error_code_split[1]].join('::');cmCreatePageviewTag(error_codes[i],error_type,null,null,u.pv_a,u.pv);}}}}else if(u.data.a=="link"&&u.data["ManualLinkClickTag_hr"]){e="ManualLinkClickTag_";cmCreateManualLinkClickTag(u.data[e+"hr"],u.data[e+"nm"],u.data[e+"pi"]);u.data[e+"hr"]="";return;}
if(u.data["ManualImpressionTag_pi"]&&(u.data["ManualImpressionTag_cm_sp"]||u.data["ManualImpressionTag_cm_re"])){e="ManualImpressionTag_";cmStartTagSet();if(typeof u.data[e+"cm_re"]==="string"){u.data[e+"cm_re"]=u.data[e+"cm_re"].split(',');}
if(typeof u.data[e+"cm_sp"]==="string"){u.data[e+"cm_sp"]=u.data[e+"cm_sp"].split(',');}
if(u.data[e+"cm_re"]instanceof Array&&u.data[e+"cm_re"].length>0){for(f=0;f<u.data[e+"cm_re"].length;f++){var cm=new _cm("tid","9");cm.cm_re=u.data[e+"cm_re"][f];cm.pi=u.data[e+"pi"]||c1(cm.ci);cm.st=cm_ClientTS;cm.write(1);}}
if(u.data[e+"cm_sp"]instanceof Array&&u.data[e+"cm_sp"].length>0){for(f=0;f<u.data[e+"cm_sp"].length;f++){var cm=new _cm("tid","9");cm.cm_sp=u.data[e+"cm_sp"][f];cm.pi=u.data[e+"pi"]||c1(cm.ci);cm.st=cm_ClientTS;cm.write(1);}}
cmSendTagSet();u.data[e+"pi"]="";}
if(u.data.tid["3"]||b._cevent==="purchase"){if(u.data.order_currency)cmSetupOther({"cm_currencyCode":u.data.order_currency});e="ShopAction9Tag_";u.data[e+"on"]=u.data[e+"on"]||u.data.order_id;u.data[e+"tr"]=u.data[e+"tr"]||u.data.order_subtotal;u.data[e+"cd"]=u.data[e+"cd"]||u.data.customer_id||utag.data["cp.utag_main_ses_id"];u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"qt"]=u.data[e+"qt"]||u.data.product_quantity;u.data[e+"bp"]=u.data[e+"bp"]||u.data.product_unit_price;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;for(f=0;f<u.data[e+"pr"].length;f++){u.data.s_a=u.concat_attr("s_a",e,50,f);u.data.sx=u.concat_attr("sx",e,15,f);cmCreateShopAction9Tag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"qt"][f],u.data[e+"bp"][f],u.data[e+"cd"],u.data[e+"on"],u.data[e+"tr"],u.data[e+"cg"][f],u.data.s_a,u.data.sx);cxTagLogger('Shop9 Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]+' x '+u.data[e+"qt"][f]+' @'+u.data[e+"bp"][f]);cxTagLogger('Shop9 Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTagLogger('Shop9 Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}
cmDisplayShops();}
if(u.data.tid["3"]||b._cevent==="purchase"){e="OrderTag_";u.data[e+"on"]=u.data["ShopAction9Tag_on"]||u.data[e+"on"];u.data[e+"tr"]=u.data["ShopAction9Tag_tr"]||u.data[e+"tr"];u.data[e+"cd"]=u.data["ShopAction9Tag_cd"]||u.data[e+"cd"];u.data[e+"sg"]=u.data[e+"sg"]||u.data.order_shipping;u.data[e+"ct"]=u.data[e+"ct"]||u.data.customer_city;u.data[e+"sa"]=u.data[e+"sa"]||u.data.customer_state;u.data[e+"zp"]=u.data[e+"zp"]||u.data.customer_zip;u.data.o_a=u.concat_attr("o_a",e,50);u.data.or=u.concat_attr("or",e,15);cmCreateOrderTag(u.data[e+"on"],u.data[e+"tr"],u.data[e+"sg"],u.data[e+"cd"],u.data[e+"ct"],u.data[e+"sa"],u.data[e+"zp"],u.data.o_a,u.data.or);cxTagLogger('Order Tag - Order ID - '+u.data[e+"on"]);cxTagLogger('Order Tag - Subtotal - '+u.data[e+"tr"]);cxTagLogger('Order Tag - Surcharge - '+u.data[e+"sg"]);}
if(u.data.tid["3"]||u.data.tid["2"]||b._cevent==="register"||(u.data["RegistrationTag_em"]&&b._cevent==="purchase")){e="RegistrationTag_";u.data[e+"cd"]=u.data["ShopAction9Tag_cd"]||u.data[e+"cd"]||u.data.customer_id||utag.data["cp.utag_main_ses_id"];u.data[e+"ct"]=u.data[e+"ct"]||u.data.customer_city;u.data[e+"sa"]=u.data[e+"sa"]||u.data.customer_state;u.data[e+"zp"]=u.data[e+"zp"]||u.data.customer_zip;u.data[e+"cy"]=u.data[e+"cy"]||u.data.customer_country;u.data.rg=u.concat_attr("rg",e,50);cmCreateRegistrationTag(u.data[e+"cd"],u.data[e+"em"],u.data[e+"ct"],u.data[e+"sa"],u.data[e+"zp"],u.data[e+"cy"],u.data.rg);cxTagLogger('Registration Tag - Registration ID - '+u.data[e+"cd"]);}
if((u.data.tid["4"]&&b._cevent!="purchase")||b._cevent==="cartview"){if(u.data.order_currency)cmSetupOther({"cm_currencyCode":u.data.order_currency});e="ShopAction5Tag_";u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"qt"]=u.data[e+"qt"]||u.data.product_quantity;u.data[e+"bp"]=u.data[e+"bp"]||u.data.product_unit_price;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;for(f=0;f<u.data[e+"pr"].length;f++){u.data.s_a=u.concat_attr("s_a",e,50,f);u.data.sx=u.concat_attr("sx",e,15,f);cmCreateShopAction5Tag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"qt"][f],u.data[e+"bp"][f],u.data[e+"cg"][f],u.data.s_a,u.data.sx);cxTagLogger('Shop5 Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]+' x '+u.data[e+"qt"][f]+' @'+u.data[e+"bp"][f]);cxTagLogger('Shop5 Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTagLogger('Shop5 Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}
cmDisplayShops();}
if((u.data.tid["5"]&&b._cevent!="purchase")||b._cevent==="prodview"){e="ProductviewTag_";u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;u.data.pr_a=u.concat_attr("pr_a",e,50);if(u.data[e+"pr"]instanceof Array&&u.data[e+"pr"].length>1){for(f=0;f<u.data[e+"pr"].length;f++){u.data.pr_a=u.concat_attr("pr_a",e,50,f);cmCreateProductviewTag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"cg"][f],u.data.pr_a);cxTagLogger('ProductView Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]);cxTagLogger('ProductView Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTagLogger('ProductView Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}}else{cmCreateProductviewTag(u.data[e+"pr"]+'',u.data[e+"pm"]+'',u.data[e+"cg"]+'',u.data.pr_a,u.data[e+"cm_vc"]);cxTagLogger('ProductView Tag - [1]'+'Product ID - '+u.data[e+"pr"]);cxTagLogger('ProductView Tag - [1]'+'Product Name - '+u.data[e+"pm"]);cxTagLogger('ProductView Tag - [1]'+'Product Category - '+u.data[e+"cg"]);}}
if(u.data.tid["14"]||u.data["ConversionEventTag_cid"]||b._cevent==="conversion"){e="ConversionEventTag_";u.data[e+"cid"]=u.data[e+"cid"]||"conversion";u.data[e+"cat"]=u.data[e+"cat"]||"2";u.data.c_a=u.concat_attr("c_a",e,50);u.data.cx=u.concat_attr("cx",e,5);cmCreateConversionEventTag(u.data[e+"cid"],u.data[e+"cat"],u.data[e+"ccid"],u.data[e+"cpt"],u.data.c_a,u.data.cx);u.data[e+"cid"]="";}
if(u.data.tid["15"]||u.data["ElementTag_eid"]){e="ElementTag_";u.data.e_a=u.concat_attr("e_a",e,50);cmCreateElementTag(u.data[e+"eid"],u.data[e+"ecat"],u.data.e_a);u.data[e+"eid"]="";}}
if(document.getElementById("tealium_cormetrics84")){u.loader_cb();}else{u.loader({"type":"script","src":u.data.base_url,"cb":u.loader_cb,"loc":"script","id":'tealium_cormetrics84'});}
}};utag.o[loader].loader.LOAD(id);}('84','cathaypacific.main'));}catch(error){utag.DB(error);}

//tealium universal tag - utag.162 ut4.0.201508270937, Copyright 2015 Tealium.com Inc. All Rights Reserved.
if(typeof utag.ut=="undefined"){utag.ut={};}
utag.ut.libloader2=function(o,a,b,c,l){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=o.src;if(o.id){b.id=o.id};if(typeof o.cb=='function'){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState=='complete'||this.readyState=='loaded')&&!b.hFlag){b.hFlag=1;o.cb()}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb()}}}
l=o.loc||'head';c=a.getElementsByTagName(l)[0];if(c){if(l=='script'){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}
utag.DB("Attach to "+l+": "+o.src)}}
try{(function(id,loader){var u=utag.o[loader].sender[id]={};u.ev={'view':1};u.initialized=false;u.map={"config.optimizely.project_id":"projectId"};u.extend=[function(a,b){try{if(cxDataLayer.page.page_code=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")==-1){var subtotal=tealiumiq_currency.convert(String(cxDataLayer.transaction.payment.subtotal),cxDataLayer.transaction.payment.currency,"HKD");cxOptimizely.revenue(datalayer.transaction.order_id,subtotal)}}catch(e){cxTagLogger(e);};}];u.send=function(a,b){if(u.ev[a]||typeof u.ev.all!="undefined"){var c,d,e,f;u.data={"projectId":"","eventName":"purchase","orderId":"","revenue":""};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};for(d in utag.loader.GV(u.map)){if(typeof b[d]!=="undefined"&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
if(u.data.orderId===""&&b._corder!==undefined){u.data.orderId=b._corder;}
if(u.data.revenue===""&&b._csubtotal!==undefined){u.data.revenue=b._csubtotal;}
u.opt_callback=function(){u.initialized=true;window.optimizely=window.optimizely||[];if(u.data.orderId!==""){window.optimizely.push(["trackEvent",u.data.eventName,{"revenue":u.data.revenue.replace(".","")}]);}}
u.base_url="//cdn.optimizely.com/js/"+u.data.projectId+".js";if(!u.initialized){utag.ut.libloader2({src:u.base_url,cb:u.opt_callback});}else{u.opt_callback();}
}}
utag.o[loader].loader.LOAD(id);})('162','cathaypacific.main');}catch(e){}
if(typeof utag!='undefined'){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();}